var _i_=this._i_||function(){},_r_=this._r_||function(e){return e};booking.env.enable_scripts_tracking&&(booking.env.scripts_tracking.raf={loaded:!0,run:!1}),B.define("component/referral/floater",function(e,n,i){_i_("44d:439cb7dd");var r=e("component"),t=e("ga-tracker");i.exports=r.extend({init:function(){_i_("44d:bdf88b61");var e=this;this.$toggle=this.$el.find(".friend_landing_collapsible--header"),this.$toggleIcon=this.$el.find(".friend_landing_collapsible--toggle_icon"),this.$collapse=this.$el.find(".friend_landing_collapsible-action_button"),this.isMobile=this.$el.data("is-mobile"),this.toggleCollapseClass=this.$el.data("expanded-class"),this.toggleExpandClass=this.$el.data("collapsed-class"),this.isCollapsed=!!this.$el.data("is-collapsed"),this.isCollapsedClass=this.$el.data("landing-collapsed-class"),this.collapsingDisabled=this.$el.data("collapsing-disabled"),this.collapsingDisabled||(this.$toggle.on("click",function(){_i_("44d:db6abdaa"),e.isCollapsed?e.expand():e.collapse(),_r_()}),this.$collapse.on("click",function(){_i_("44d:ca906f67"),e.collapse(),_r_()})),t.trackEvent(t.referralFriendTracker,"view","friend_landing"),this.$el.find(".friend_landing_collapsible-tandc").on("click",function(){_i_("44d:208b670a"),t.trackEvent(t.referralFriendTracker,"click","terms_and_conditions - source: friend_landing"),_r_()}),_r_()},collapse:function(){_i_("44d:5a14237e"),this.$el.addClass(this.isCollapsedClass),this.$toggleIcon.removeClass(this.toggleCollapseClass),this.$toggleIcon.addClass(this.toggleExpandClass),this.isCollapsed=!0,t.trackEvent(t.referralFriendTracker,"collapse","friend_landing"),_r_()},expand:function(){_i_("44d:9260a3a3"),this.$el.removeClass(this.isCollapsedClass),this.$toggleIcon.addClass(this.toggleCollapseClass),this.$toggleIcon.removeClass(this.toggleExpandClass),this.isCollapsed=!1,t.trackEvent(t.referralFriendTracker,"expand","friend_landing"),_r_()}}),_r_()}),B.define("referral/clipboard",function(e,n,i){_i_("44d:6dad79bc");var r=function(){};r.prototype.copy=function(e,n){_i_("44d:b9e312de"),this.text=e,this.isRTL=B.env.b_lang_rtl,"function"==typeof n&&(this.copyCallback=n),this.selectFake(),_r_()},r.prototype.selectFake=function(){_i_("44d:563ce6c9"),this.removeFake();var e=document.createElement("textarea");(this.fakeElement=e).style.fontSize="12pt",e.style.border="0",e.style.padding="0",e.style.margin="0",e.style.position="absolute",e.style[this.isRTL?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;e.style.top=n+"px",e.setAttribute("readonly",""),e.value=this.text,document.body.appendChild(e),function(e){var n;if(_i_("44d:eed13d9d"),"SELECT"===e.nodeName)e.focus(),n=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var i=e.hasAttribute("readonly");i||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),i||e.removeAttribute("readonly"),n=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),t=document.createRange();t.selectNodeContents(e),r.removeAllRanges(),r.addRange(t),n=r.toString()}_r_(n)}(e),this.copyText(),_r_()},r.prototype.removeFake=function(){_i_("44d:dcba3dac"),this.fakeElement&&(document.body.removeChild(this.fakeElement),this.fakeElement=null),_r_()},r.prototype.copyText=function(){var n;_i_("44d:881b30ae");try{n=document.execCommand("copy")}catch(e){n=!1}this.handleResult(n),_r_()},r.prototype.handleResult=function(e){_i_("44d:14c14746"),this.copyCallback&&(e?this.copyCallback(null):this.copyCallback(!0)),this.removeFake(),_r_()},i.exports=new r,_r_()}),B.define("component/referral/share",function(e,n,i){_i_("44d:8a1a989c");var a=e("ga-tracker"),_=e("tooltip"),o=e("referral/clipboard"),r=e("referral/raf-goal"),t=e("referral/rap-goal");i.exports=e("component").extend({init:function(){_i_("44d:e4616695");var r=this,n=this.$el.data("share-link"),t=this.$el.data("tooltip-id")||"clipboard-tooltip";this.isPartnerProgram=this.$el.is("[data-is-partner-program]"),this.isShowCompliment=this.$el.is("[data-show-compliment]"),this.$emailShare=this.$el.find(".js-raf-share-email"),this.$emailShare.on("click",function(){_i_("44d:1c8d4064"),r.triggerGoal("share_email",this.isPartnerProgram?"click email mobile button":"click email button"),_r_()}),this.$gmailShare=this.$el.find(".js-raf-share-gmail"),this.$gmailShare.on("click",function(){_i_("44d:1b612da0"),r.triggerGoal("share_gmail","click gmail button"),_r_()}),this.$fbShare=this.$el.find(".js-raf-share-facebook"),this.$fbShare.on("click",function(e){_i_("44d:061c0e26"),e.preventDefault(),r.showPopupWindow($(this).attr("href"),"Share",480,320),r.triggerGoal("share_facebook","click facebook button"),_r_()}),this.$twShare=this.$el.find(".js-raf-share-twitter"),this.$twShare.on("click",function(e){_i_("44d:0b0d8550"),e.preventDefault(),r.triggerGoal("share_twitter","click twitter button"),r.showPopupWindow($(this).attr("href"),"Share",480,320),_r_()}),this.$el.find(".raf-scoreboard--link").on("click",function(n){_i_("44d:2f7ad4a8");var e=$(this).val();o.copy(e,function(e){if(_i_("44d:bce39a05"),e)return _r_(!1);r.triggerGoal("share_copy"),r.$urlShare.text(r.$urlShare.data("success-copy")),n.target.select(),_r_()}),_r_()}),this.$el.find(".raf-scoreboard--link").on("copy",function(){_i_("44d:4b58d24c"),a.trackEvent(a.referralAdvocateTracker,"copy link","myreferrals"),_r_()}),this.$urlShare=this.$el.find(".js-raf-share-copy"),this.$urlShare.on("click",function(e){_i_("44d:da57e023");var n=r.$urlShare.data("share-link"),i=_.get(t);e.preventDefault(),o.copy(n,function(e){if(_i_("44d:038f8483"),e)return _r_(!1);r.triggerGoal("share_copy"),i?(i.show(),setTimeout(function(){var e;_i_("44d:d5add9e4"),e=i,_i_("44d:73af4510"),e&&e.hide&&e.hide(),_r_(),_r_()},1e3)):r.$urlShare.text(r.$urlShare.data("success-copy")),_r_()}),a.trackEvent(a.referralAdvocateTracker,"share - source: "+B.env.b_action,"click url button"),_r_()}),this.$whatsappShare=this.$el.find(".js-raf-share-whatsapp"),this.$whatsappShare.on("click",function(){_i_("44d:364e4520"),r.triggerGoal("share_whatsapp","click whatsapp button"),_r_()}),this.$linkedinShare=this.$el.find(".js-raf-share-linkedin"),this.$linkedinShare.on("click",function(){_i_("44d:ba038609"),r.triggerGoal("share_linkedin","click linkedin button"),_r_()}),this.$messengerShare=this.$el.find(".raf_scoreboard--social_share_link.-messenger, .js-raf-share-messenger"),this.$messengerShare.on("click",function(e){_i_("44d:04de4611"),r.triggerGoal("share_messenger","click messenger button"),"undefined"!=typeof FB&&void 0!==FB.ui&&(e.preventDefault(),n||(n=$(this).data("share-link")),FB.ui({method:"send",link:n})),_r_()}),_r_()},showPopupWindow:function(e,n,i,r){_i_("44d:9957ea84");var t=window.screen.width/2-i/2,a=window.screen.height/2-r/2;return _r_(window.open(e,n,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+i+", height="+r+", top="+a+", left="+t))},triggerGoal:function(e,n){_i_("44d:201f4c6e"),this.isPartnerProgram?t.shareGoal(e):r.shareGoal("gm_"+e),n&&a.trackEvent(this.isPartnerProgram?a.referralPartnerAdvocateTracker:a.referralAdvocateTracker,"share - source: "+B.env.b_action,n),_r_()}}),_r_()}),B.define("component/referral/friend-landing-modal",function(e,n,i){_i_("44d:db36d087");var r,t=e("component"),a=e("lightbox"),_=e("ga-tracker"),o=e("jquery"),s=B.env,d=e("browser-storage-handler"),l=e("events"),c=e("jstmpl"),u=!1,p=e("component/referral/name-reward-copy-logic/dynamic-tag-copy-logic"),f="raf_landing_modal_opened";"www"===s.b_site_type&&"index"===s.b_action&&(r=e("ultrafocus").getInstance("raf_landing","[data-sb-outer],[data-raf-widget]")),booking.jstmpl("friend_landing_card",function(){_i_("44d:2c11e6b3");var a,_=["\n        ","\n    ","\n\n\n",'\n    <div\n        class="warn-message ','"\n        data-component="referral/warning-message"\n    >\n        <div class="warn-message__dismiss js-warning-message-dismiss">\n            ',"17","iconset/close","\n        </div>\n        ",'\n            <div class="warn-message__head">\n                <div class="warn-message__head-text">\n                        ',"20","iconset/warning","\n                    ","\n                </div>\n            </div>\n        ",'\n        <div class="warn-message__body">\n            ',"\n        </div>\n    </div>\n","\n",'\n<div class="raf-friend-landing-card">\n    <div class="raf-friend-landing-card__content">\n        <div class="raf-friend-landing-card__title">\n            ',"\n                ","\n            ","/private/raf_friend_lightbox_title/name",'\n        </div>\n\n        <div class="raf-friend-landing-card__subtitle">\n            ',"/private/raf_friend_lightbox_subtitle/name","/private/raf_friend_lightbox_subtitle_noname/name",'\n        </div>\n\n        <hr class="raf-friend-landing-card__divisor">\n\n        ',"/private/raf_friend_lightbox_step_1_description/name","/private/raf_friend_lightbox_step_2_description/name","/private/raf_friend_lightbox_step_3_description/name","\n\n        ","\n            \n            ",'\n\n        <div class="raf-friend-landing-card__steps">\n            <div class="raf-friend-landing-card__step">\n                <div class="raf-friend-landing-card__step-number">\n                    1\n                </div>\n                <p>','</p>\n                <img src="','" class="raf-friend-landing-card__step-image image__gift-heart" alt="">\n            </div>\n            <div class="raf-friend-landing-card__step">\n                <div class="raf-friend-landing-card__step-number">\n                    2\n                </div>\n                <p>','</p>\n                \n                <img src="','" class="raf-friend-landing-card__step-image image__booking-property" alt="">\n            </div>\n            <div class="raf-friend-landing-card__step">\n                <div class="raf-friend-landing-card__step-number">\n                    3\n                </div>\n                <p>','" class="raf-friend-landing-card__step-image image__wallet-gift" alt="">\n            </div>\n        </div>\n\n        ','\n            <div class="raf-min-spend-message">\n                ',"\n            </div>\n        ",'\n        <div class="raf-friend-landing-card__action">\n            ','\n                <a class="raf-friend-landing-card__button" href="','">\n                    ',"/private/raf_flex_modal_button_signin_register/name","\n                </a>\n            ",'\n                        <a class="raf-friend-landing-card__button" href="','">',"/private/raf_deals_easter19_cta/name","</a>\n                    ",'\n                        <a class="raf-friend-landing-card__button js-close-friend-landing-lightbox" href="#">\n                            ',"/private/raf_flex_post_signin_modal_button/name","\n                        </a>\n                    ",'\n                    <a class="raf-friend-landing-card__button js-close-friend-landing-lightbox" href="',"#",'">\n                        ',"/private/raf_friend_lightbox_button_text/name","\n                    </a>\n                ","\n        </div>\n    </div>\n</div>\n"],o=["fe_warning_message_extra_classes","fe_warning_message_header","fe_warning_message_body","fe_self_referral","fe_trans_raf_friend_lightbox_heading_signedin","fe_is_raf_campaign","b_user_auth_level_is_low_or_high","fe_trans_raf_friend_lightbox_heading","reward_value","fe_trans_raf_friend_lightbox_subtitle_deals","fe_show_deals","fe_trans_raf_friend_lightbox_subtitle_signedin","advocate_name","fe_raf_friend_lightbox_step_1_description_translated","fe_raf_friend_lightbox_step_2_description_translated","fe_raf_friend_lightbox_step_3_description_translated","fe_trans_raf_friendlanding_index_lightbox_step3_description","fe_raf_desktop_friend_landing_banner_minimum_spend","b_site_type","fe_login_page_accounts_portal_url","fe_deals_url","b_url_for_raf_flow","b_has_raf_link_saved_in_account"];return _r_(function(e){_i_("44d:11c13f3c");var n,i,r="",t=this.fn;return r+=_[0],n=r,_i_("44d:725ec633"),t.MJ(t.MB(o[3]))&&(n+=_[1],e.unshift({fe_warning_message_body:t.MB(o[2]),fe_warning_message_header:t.MB(o[1])}),i=n,_i_("44d:dd764c99"),i+=[_[2],"",_[3],t.F.entities(t.MC(o[0])),_[4],(e.unshift({height:_[5],name:_[6],width:_[5]}),a=t.HELPER("icon",e[0]),e.shift(),a),_[7]].join(""),t.MD(o[1])&&(i+=[_[8],(e.unshift({color:"#CD8900",height:_[9],name:_[10],width:_[9]}),a=t.HELPER("icon",e[0]),e.shift(),a),_[11],t.MC(o[1]),_[12]].join("")),i+=[_[13],t.MC(o[2]),_[14],"",_[15]].join(""),n=_r_(i),e.shift(),n+=_[15]),n+=_[16],t.MD(o[5])?(n+=_[17],t.MJ(t.MB(o[5]))&&t.MJ(t.MC(o[6]))?n+=[_[11],t.F.entities(t.MC(o[4])),_[17]].join(""):n+=[_[11],t.F.entities(t.MC(o[7])),_[17]].join(""),n+=_[18]):n+=[_[17],(e.unshift({value:t.MB(o[8])}),a=t.ME(_[19],t.MB,t.MN,null),e.shift(),a),_[18]].join(""),n+=_[20],t.MJ(t.MB(o[5]))&&t.MJ(t.MC(o[6]))?(n+=_[17],t.MD(o[10])?n+=[_[11],t.F.entities(t.MC(o[9])),_[17]].join(""):n+=[_[11],t.F.entities(t.MC(o[11])),_[17]].join("")):(n+=_[17],t.MD(o[12])?n+=[_[11],(e.unshift({friend_name:t.MB(o[12])}),a=t.ME(_[21],t.MB,t.MN,null),e.shift(),a),_[17]].join(""):n+=[_[11],t.ME(_[22],t.MB,t.MN,null),_[17]].join("")),n+=_[18],n+=_[23],t.MN(o[13],t.ME(_[24],t.MB,t.MN,null)),n+=_[0],t.MN(o[14],t.ME(_[25],t.MB,t.MN,null)),n+=_[0],t.MN(o[15],t.ME(_[26],t.MB,t.MN,null)),n+=_[27],t.MD(o[5])&&(n+=_[28],t.MN(o[13],t.ME(_[24],t.MB,t.MN,null)),n+=_[18],t.MN(o[14],t.ME(_[25],t.MB,t.MN,null)),n+=_[18],t.MN(o[15],t.F.entities(t.MC(o[16]))),n+=_[0]),n+=[_[29],t.MC(o[13]),_[30],t.STATIC_HOSTNAME("/static/img/referral/raf-gift-heart-decorated.svg",0,0,0,0),_[31],t.MC(o[14]),_[32],t.STATIC_HOSTNAME("/static/img/referral/raf-booking-property.svg",0,0,0,0),_[33],t.MC(o[15]),_[30],t.STATIC_HOSTNAME("/static/img/referral/raf-wallet-gift.svg",0,0,0,0),_[34]].join(""),t.MJ(t.MC(o[18])+""=="www")&&(n+=[_[35],t.MC(o[17]),_[36]].join("")),n+=_[37],t.MJ(t.MB(o[5]))&&t.MK(t.MC(o[6]))?n+=[_[38],t.F.entities(t.MC(o[19])),_[39],t.ME(_[40],t.MB,t.MN,null),_[41]].join(""):(n+=_[17],t.MJ(t.MB(o[5]))&&t.MJ(t.MC(o[6]))?(n+=_[11],t.MD(o[10])?n+=[_[42],t.F.entities(t.MC(o[20])),_[43],t.ME(_[44],t.MB,t.MN,null),_[45]].join(""):n+=[_[46],t.ME(_[47],t.MB,t.MN,null),_[48]].join(""),n+=_[17]):(n+=_[49],t.MD(o[22])?n+=t.F.entities(t.MC(o[21])):n+=_[50],n+=[_[51],t.ME(_[52],t.MB,t.MN,null),_[53]].join("")),n+=_[18]),n+=_[54],r=_r_(n),r+=_[1],_r_(r)})}());var m=function(){_i_("44d:b5e0eafd"),o(".raf-widget--hidden").removeClass("raf-widget--hidden"),_r_()};i.exports=t.extend({init:function(){_i_("44d:7f82f564"),l.on("raf-warning-hide",function(){_i_("44d:a146b57b"),a.rePosition(),_r_()}),this.doGaStuff(),this.bindExternalEvents();var e=this;window.setTimeout(function(){if(_i_("44d:7796f050"),e.shouldSkipLightbox())return m(),_r_();e.bindEvents(),e.renderLightbox(),_r_()},300),_r_()},bindExternalEvents:function(){_i_("44d:5c6748d9");var e=this;booking.eventEmitter.on("account-onboarding-modal-show",function(){_i_("44d:599b6801"),u=!0,_r_()}),l.on("onboarding-lightbox-dismissed",function(){_i_("44d:2afea17a"),u=!1,window.setTimeout(function(){_i_("44d:77a78e55"),a.isVisible()||e.init(),_r_()},100),_r_()}),_r_()},bindEvents:function(){var e;(_i_("44d:9f829f3f"),o("body").on("click",".js-close-friend-landing-lightbox",this.closeLightbox),void 0!==r)&&(r.on("ultrafocus::shown",function(){_i_("44d:c3af9a61"),o("#ss").focus(),e=window.setTimeout(function(){_i_("44d:68f0f3a9"),o("#raf-widget-text-container").addClass("expanded"),_r_()},3e3),_r_()}),r.on("ultrafocus::hidden",function(){_i_("44d:941125aa"),window.clearTimeout(e),_r_()}));_r_()},renderLightbox:function(){_i_("44d:0914cd39");var e=B.jstmpl("friend_landing_card"),n=s.b_secure_domain+"/myreferrals"+s.b_query_params_with_lang,i={reward_value:s.referral_data.reward_friend,reward_value_percentage:s.referral_data.reward_friend_percentage,advocate_name:s.referral_data.advocate_name,b_raf_li_in:s.b_raf_li_in,b_raf_prop_ne:s.b_raf_prop_ne,b_companyname:s.b_companyname,fe_faq_link:(s.b_secure_domain||s.b_secure_hostname)+"/content/referral-faq"+s.b_query_params_with_lang,fe_warning_message_header:c.translations("raf_self_landing_alert_index_headline"),fe_warning_message_body:"<p>"+c.translations("raf_self_landing_alert_index_subtext_1")+"</p><p><a target='_blank' href='"+n+"'>"+c.translations("raf_self_landing_alert_index_button_refer")+"</a></p>",fe_self_referral:!!s.referral_data.fe_self_referral,b_site_type:s.b_site_type,fe_raf_desktop_friend_landing_banner_minimum_spend:c.translations("raf_desktop_friend_landing_banner_minimum_spend",null,{minimum_spend:s.referral_data.b_raf_min_qualifying_amount_campaign_currency}),b_user_auth_level_is_none:s.b_user_auth_level_is_none,b_myreferral_link:s.referral_data.myreferral_link,fe_raf_marketing_validation:s.referral_data.fe_passed_raf_marketing_validation,b_raf_user_has_valid_booking:s.referral_data.b_raf_user_has_valid_booking,fe_is_raf_campaign:s.referral_data.is_raf_campaign,fe_trans_raf_friend_lightbox_heading:s.referral_data.is_raf_campaign?p.translate({fe_raf_campaign_details_fragment_output:s.referral_data.fe_raf_campaign_details,fe_raf_dynamic_copy_id:"raf_friendlanding_index_lightbox_headline",fe_raf_dynamic_copy_variable_campaign:!0,fe_raf_dynamic_copy_variable_reward:!0}):"",fe_trans_raf_friend_lightbox_heading_signedin:s.referral_data.is_raf_campaign?p.translate({fe_raf_campaign_details_fragment_output:s.referral_data.fe_raf_campaign_details,fe_raf_dynamic_copy_id:"raf_flex_post_signin_modal_headline",fe_raf_dynamic_copy_variable_name:!0}):"",fe_trans_raf_friend_lightbox_heading_instant_discount:s.referral_data.is_raf_campaign?p.translate({fe_raf_campaign_details_fragment_output:s.referral_data.fe_raf_campaign_details,fe_raf_dynamic_copy_id:"raf_instant_discount_flex_modal_headline",fe_raf_dynamic_copy_variable_campaign:!0}):"",fe_trans_raf_friend_lightbox_subtitle_instant_discount:s.referral_data.is_raf_campaign?p.translate({fe_raf_campaign_details_fragment_output:s.referral_data.fe_raf_campaign_details,fe_raf_dynamic_copy_variable_name:!0,fe_raf_dynamic_copy_id:"raf_instant_discount_flex_modal_subtext"}):"",fe_trans_raf_friend_lightbox_subtitle_signedin:s.referral_data.is_raf_campaign?p.translate({fe_raf_campaign_details_fragment_output:s.referral_data.fe_raf_campaign_details,fe_raf_dynamic_copy_id:"raf_flex_post_signin_modal_subtext",fe_raf_dynamic_copy_variable_campaign:!0,fe_raf_dynamic_copy_variable_reward:!0}):"",fe_trans_raf_friendlanding_index_lightbox_step3_description:s.referral_data.is_raf_campaign?p.translate({fe_raf_campaign_details_fragment_output:s.referral_data.fe_raf_campaign_details,fe_raf_dynamic_copy_id:"raf_friendlanding_index_lightbox_step3_description",fe_raf_dynamic_copy_variable_reward:!0}):"",fe_force_login:s.referral_data.rafForceLogin||0,b_user_auth_level_is_high:s.b_user_auth_level_is_high,b_user_auth_level_is_low_or_high:s.b_user_auth_level_is_low_or_high||+s.auth_level&&0<+s.auth_level,fe_show_deals:s.raf_show_deals,fe_deals_url:s.raf_show_deals?s.b_nonsecure_hostname+"/dealspage"+s.b_query_params_with_lang+s.b_query_params_delimiter+"campaign_id=easter_2019"+s.b_query_params_delimiter:"",fe_trans_raf_friend_lightbox_subtitle_deals:s.raf_show_deals?p.translate({fe_raf_campaign_details_fragment_output:s.referral_data.fe_raf_campaign_details,fe_raf_dynamic_copy_id:"raf_deals_easter19_subheader",fe_raf_dynamic_copy_variable_reward:!0}):"",fe_login_page_accounts_portal_url:B.env.fe_login_page_accounts_portal_url};_i_("44d:ada225d4"),o(".raf-widget, .raf-widget-text-container").addClass("raf-widget--hidden"),_r_();var r={autoWidth:!1,customWrapperClassName:"raf-friend-landing-card__lightbox-wrapper"+(2==s.referral_data.rafForceLogin?" raf-friend-landing-card__side-ui":""),customMaskClassName:"raf-friend-landing-card__lightbox-mask",positionAfterCallBack:function(){_i_("44d:f64ef655"),_.trackEvent(_.referralFriendTracker,"show","Friend Landing Lightbox"),_r_()},hideCallBack:function(){_i_("44d:2b257c9a"),B.env.referral_data.rafForceLogin||(_.trackEvent(_.referralFriendTracker,"dismiss","Friend Landing Lightbox"),d.addSessionValue(f,1)),m(),_r_()}};s.referral_data.rafForceLogin&&(r.bCloseButton=!1,r.bMaskClick=!1,r.closeOnEsc=!1);var t=a.show(e.render(i),r);t&&t.loadComponents&&t.loadComponents(),_r_()},closeLightbox:function(e){if(_i_("44d:4fe58a90"),e.preventDefault(),_.trackEvent(_.referralFriendTracker,"click","Friend Landing Lightbox"),!B.env.referral_data.rafForceLogin)if("www"==B.env.b_site_type||"tdot"==B.env.b_site_type){var n=o(".raf-friend-landing-card__lightbox-wrapper");s.rtl?n.css({bottom:n.css("bottom"),top:"auto"}).animate({left:"25px",bottom:"25px",width:"75px",height:"75px"},400,function(){_i_("44d:7eee0619"),a.hide(),_r_()}):n.css({right:n.css("right"),left:"auto",bottom:n.css("bottom"),top:"auto"}).animate({right:"25px",bottom:"25px",width:"75px",height:"75px"},400,function(){_i_("44d:7eee06191"),a.hide(),_r_()})}else a.hide();void 0===r||B.env.referral_data.rafForceLogin||r.show(),_r_()},shouldSkipLightbox:function(){return _i_("44d:a93e2ba9"),_r_(!B.env.b_is_landing&&d.getSessionValue(f)&&!s.b_raf_li_in&&!s.b_raf_prop_ne||s.referral_data.is_incentive_campaign||s.referral_data.b_has_raf_link_saved_in_account&&"89"==s.referral_data.raf_source||u)},switchView:function(e){_i_("44d:ccdef575");var n=o("#"+e).html();o(".raf-friend-landing-card__content").addClass("raf-sfl-view-wrapper").html(n),a.rePosition(),_r_()},saveForLater:function(){_i_("44d:342dc764"),o.ajax({url:s.b_secure_domain+"/saveforlateraccount",method:"POST",data:{save:1},success:function(e){_i_("44d:bc4f7f7f");var n=B.jstmpl("save_for_later_account_success");a.show(n.render({fe_index_url_no_raf:e.default_url,b_secure_hostname:s.b_secure_domain,b_query_params_with_lang:s.b_query_params_with_lang,b_query_params_delimiter:s.b_query_params_delimiter}),{bMaskClick:!1,bCloseButton:!1,customWrapperClassName:"sfla-success-modal-wrapper"}),_r_()},error:function(){},xhrFields:{withCredentials:!0}}),_r_()},doGaStuff:function(){if(_i_("44d:6846512c"),!s.referral_data||!s.referral_data.is_raf_campaign)return _r_();var e="RAF_LOGGED_OUT_LANDING";0<+s.auth_level&&d.getSessionValue(e)?(d.deleteSessionValue(e),_.trackEvent(_.webViralityTracker,"raf-login-success"),2==+s.auth_level&&s.referral_data.user_just_registered?_.trackEvent(_.webViralityTracker,"raf-login-success-created"):_.trackEvent(_.webViralityTracker,"raf-login-success-login")):0==+s.auth_level&&d.addSessionValue(e,1),_r_()}}),_r_()}),B.define("referral/raf-goal",function(e,n,i){_i_("44d:97b3ad3a");var r=e("et");i.exports={shareGoal:function(e){_i_("44d:53c28dcd"),r.goal(e),r.goal("gm_share"),_r_()}},_r_()}),B.define("referral/rap-goal",function(e,n,i){_i_("44d:2e0f5abd");var r=e("et");i.exports={shareGoal:function(e){_i_("44d:2cd92b4e"),r.goal("grap_share"),_r_()}},_r_()}),function(p){_i_("44d:a6bb0ba0");function f(e){_i_("44d:92f30a71"),p.reportError(new Error(e),"raf:copy-input"),_r_()}p.define("component/referral/copy-input",function(e,n,i){_i_("44d:09bb1fb1");var r=e("component"),l=e("referral/clipboard"),t=e("tooltip"),a=e("referral/raf-goal"),c=e("referral/rap-goal"),u=e("ga-tracker");i.exports=r.extend({init:function(){_i_("44d:2f039e91");var i=this,e=this.$el.find(".js-raf-copy-btn"),_=this.$el.find(".js-raf-copy-input"),n=this.$el.is("[data-is-partner-program]"),o=_.val();if(!_.get(0))return f("Share link node is missing"),_r_();if(!e.get(0))return f("Share btn node is missing"),_r_();if(!o)return f("RAF share links is missing"),_r_();function s(){_i_("44d:35202ca9");var e=i.$el.data("tooltip-id"),n=t.get(e);if(!n)return f('Tooltip with id "'+e+'" is missing'),_r_();n.show(),setTimeout(function(){_i_("44d:ce2c5886"),n.hide(),_r_()},1e3),_r_()}function d(){_i_("44d:43c5560b"),n?(u.trackEvent(u.referralPartnerAdvocateTracker,"share - source: "+p.env.b_action,"click copy"),c.shareGoal("share_copy")):a.shareGoal("gm_share_copy"),_r_()}e.add(_).on("click",function(e){if(_i_("44d:4a7ebd46"),e.preventDefault(),navigator.userAgent.match(/ipad|ipod|iphone/i)){var n=_.get(0),i=n.contentEditable,r=n.readOnly;n.contentEditable=!0,n.readOnly=!1;var t=document.createRange();t.selectNodeContents(n);var a=window.getSelection();a.removeAllRanges(),a.addRange(t),n.setSelectionRange(0,999999),n.contentEditable=i,n.readOnly=r,document.execCommand("copy"),_.blur(),s(),d()}else l.copy(o,function(e){if(_i_("44d:3fc4dc86"),_.select(),e)return _r_();s(),d(),_r_()}.bind(this));_r_()}),_r_()}}),_r_()}),_r_()}(window.B),B.define("component/referral/ribbon",function(e,n,i){_i_("44d:085955f7");var r=e("component"),t=e("jquery"),a=e("ga-tracker"),_=e("events"),o="index"===B.env.b_action;if(o)var s=e("ultrafocus").getInstance("raf_ribbon","[data-sb-outer]");var d="-collapsed";i.exports=r.extend({init:function(){_i_("44d:9648204f");var e=this;(this.searchInput=t("#ss"),this._onToggleClickBinded=this.onToggleClick.bind(this),this._onRibbonClickBinded=this.onRibbonClick.bind(this),this.$el.on("click",this._onRibbonClickBinded),this.$toggle=this.$el.find(".referral_ribbon--toggle"),this.$toggle.on("click",this._onToggleClickBinded),o)&&(s.on("ultrafocus::shown",function(){_i_("44d:f665ceda"),e.searchInput&&e.searchInput.focus(),_r_()}),B.require("search/searchbox/searchbox-sticky-controller").getController().on("show",function(){_i_("44d:ecb191ee"),s.hide(),_r_()}));this.$actionButton=this.$el.find(".referral_ribbon--button"),this.$actionButton.on("click",function(e){_i_("44d:8aaed789"),e.stopPropagation(),this.collapse(),o&&s.show(),a.trackEvent(a.referralFriendTracker,"click","start-searching button on ribbon"),_r_()}.bind(this)),this.$el.find(".referral_ribbon--terms a").on("click",function(){_i_("44d:37900131"),a.trackEvent(a.referralFriendTracker,"click","term_and_conditions - source: ribbon on"+B.env.b_action),_r_()}),_.on("incentives:campaignExpired",function(){_i_("44d:10d5b5fa"),this.$el.remove(),_r_()}.bind(this)),_r_()},onToggleClick:function(e){_i_("44d:d81ac054"),e.stopPropagation(),this.collapse(),_r_()},onRibbonClick:function(e){_i_("44d:88cd48cb"),this.$el.hasClass(d)&&(e.stopPropagation(),this.expand(),this.$el.off("click",this._onRibbonClickBinded),this.$toggle.on("click",this._onToggleClickBinded)),_r_()},collapse:function(){_i_("44d:1277b34c"),this.$el.addClass(d),this.$toggle.off("click",this._onToggleClickBinded),this.$el.on("click",this._onRibbonClickBinded),a.trackEvent(a.referralFriendTracker,"collapse","ribbon"),_r_()},expand:function(){_i_("44d:8865cd7b"),this.$el.removeClass(d),a.trackEvent(a.referralFriendTracker,"expand","ribbon"),_r_()}}),_r_()}),B.define("component/referral/ribbon-green",function(e,n,i){_i_("44d:1d8320f8");var r=e("ga-tracker");i.exports=e("component").extend({init:function(){_i_("44d:642d9e6e"),$(document.documentElement).addClass("raf-ribbon-presents"),this.$el.on("click",function(){_i_("44d:1ae5e5bf"),r.trackEvent(r.referralFriendTracker,"click","ribbon-green"),_r_()}.bind(this)),this.$el.on("mouseover",function(){_i_("44d:750d0fea"),r.trackEvent(r.referralFriendTracker,"hover","ribbon-green"),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/referral/raf-widget",function(e,n,i){_i_("44d:4fedf566"),i.exports=e("component").extend({init:function(){_i_("44d:0d45f1fb");var e=$("#raf-widget-text-container"),n=this.$el,i=e.hasClass("expanded");n.on("click",function(){_i_("44d:de2eb1da"),e.toggleClass("expanded"),_r_()});var r=e.data("expandAfter");r&&0<+r&&!i&&window.setTimeout(function(){_i_("44d:ec766fba"),e.addClass("expanded"),_r_()},+r),_r_()}}),_r_()}),B.define("component/referral/name-reward-copy-logic/dynamic-tag-copy-logic",function(e,n,i){_i_("44d:2fa0ee21");var c=e("jstmpl");function u(e,n){if(_i_("44d:d4b0c3f9"),n)return _r_("employee");if(e.b_campaign_details.b_is_discount_campaign)return _r_("percent");return _r_("fixed")}function p(e,n){return _i_("44d:6886ec45"),_r_(n?e.b_campaign_details.b_raf_reward_type_friend:e.b_campaign_details.b_raf_reward_type_advocate)}function f(e){if(_i_("44d:46d2fa3b"),e.advocate_name)return _r_("name");return _r_("noname")}function m(e,n){_i_("44d:77edce6d");var i=null;return i=n?e.b_campaign_details.b_raf_reward_advocate:e.b_campaign_details.b_is_discount_campaign?e.b_campaign_details.b_raf_reward_friend_percentage:e.b_campaign_details.b_raf_reward_friend,_r_(i)}i.exports={translate:function(e){_i_("44d:272ee07a");var n=e.fe_raf_campaign_details_fragment_output,i=e.fe_raf_dynamic_copy_id,r=e.fe_raf_dynamic_copy_variable_campaign||!1,t=e.fe_raf_dynamic_copy_variable_reward||!1,a=e.fe_raf_dynamic_copy_variable_name||!1,_=e.fe_raf_is_advocate_copy||!1,o=null,s=null,d=null,l=null;if(r&&t&&a)return o=u(n,_),s=p(n,_),d=f(n),l=m(n,_),_r_(c.translations(i+"_"+o+"_"+s+"_"+d,l,{advocate_name:n.advocate_name,value_percent_friend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_reward_friend_percentage,value_friend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_reward_friend_with_currency,minimum_spend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_min_qualifying_amount_campaign_currency}));if(r&&t)return o=u(n,_),s=p(n,_),l=m(n,_),_r_(c.translations(i+"_"+o+"_"+s,l,{value_percent_friend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_reward_friend_percentage,value_friend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_reward_friend_with_currency,minimum_spend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_min_qualifying_amount_campaign_currency}));if(t&&a)return s=p(n,_),d=f(n),_r_((c.translations(i+"_"+s+"_"+d),{advocate_name:n.advocate_name,value_percent_friend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_reward_friend_percentage,value_friend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_reward_friend_with_currency,minimum_spend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_min_qualifying_amount_campaign_currency}));if(r&&a)return o=u(n,_),d=f(n),l=m(n,_),_r_(c.translations(i+"_"+o+"_"+d,l,{advocate_name:n.advocate_name}));if(r)return o=u(n,_),l=m(n,_),_r_(c.translations(i+"_"+o,l,{value_percent_friend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_reward_friend_percentage,value_friend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_reward_friend_with_currency}));if(t)return s=p(n,_),_r_(c.translations(i+"_"+s,null,{value_percent_friend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_reward_friend_percentage,value_friend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_reward_friend_with_currency,minimum_spend:n&&n.b_campaign_details&&n.b_campaign_details.b_raf_min_qualifying_amount_campaign_currency}));if(a)return d=f(n),_r_(c.translations(i+"_"+d,null,{advocate_name:n.advocate_name}));_r_()}},_r_()}),B.define("component/referral/require-login-lightbox",function(e,n,i){_i_("44d:9a29c119");var r=e("component");i.exports=r.extend({init:function(){_i_("44d:57a957ef"),B.command("show-auth-lightbox").run({tab:"register",extraClass:"uam-lighbox-force-login"}),_r_()}}),_r_()}),B.define("component/referral/invalid-link",function(e,n,i){_i_("44d:ffdc4fb7");var r=e("component"),t=e("lightbox");booking.jstmpl("invalid_link_card",function(){_i_("44d:eaab8a16");var t,a=["\n        ","\n",'\n    <div data-component="referral/require-login-lightbox"></div>\n','\n    <div class="raf_modal_invalid">\n        <div class="raf_modal_invalid__title">\n            ',"\n                ","/private/raf_friend_landing_shut_down_modal_body/name","\n            ","/private/raf_flex_shutdown_influencers/name",'\n        </div>\n        <div class="raf_modal_invalid_image">\n            <img width="150" src="','" alt="invalid raf">\n        </div>\n        <div class="raf_modal_invalid__subtitle">\n        </div>\n        <div class="raf_modal_invalid__body">\n        </div>\n        <div class="raf_modal_invalid_cta">\n            <button class="bui-button bui-button--primary js-modal-close" type="button" style="width: 100%">\n                <span class="bui-button__text">\n                    ',"/private/raf_validation_error_modal_employee_button/name",'\n                </span>\n            </button>\n        </div>\n        <button class="modal-mask-closeBtn" title="Close">\n            ',"iconset/close","large",'\n            <span class="invisible_spoken">Close</span>\n        </button>\n    </div>\n',"\n    "],_=["b_raf_error_code","b_raf_li_in","b_campaign_expired"];return _r_(function(e){_i_("44d:fe6eaff8");var n,i="",r=this.fn;return i+=a[0],n=i,_i_("44d:669836af"),n+=a[1],r.MJ(r.MC(_[0])+""=="user_not_logged_in")?n+=a[2]:(n+=a[3],r.MJ(1==r.MC(_[1]))?n+=[a[4],r.ME(a[5],r.MB,r.MN,null),a[6]].join(""):r.MJ(1==r.MC(_[2]))&&(n+=[a[4],r.ME(a[7],r.MB,r.MN,null),a[6]].join("")),n+=[a[8],r.STATIC_HOSTNAME("/static/img/referral/raf-failure.svg",0,0,0,0),a[9],r.ME(a[10],r.MB,r.MN,null),a[11],(e.unshift({name:a[12],size:a[13]}),t=r.HELPER("icon",e[0]),e.shift(),t),a[14]].join("")),i=_r_(n),i+=a[15],_r_(i)})}()),i.exports=r.extend({init:function(){_i_("44d:16a9c65b");var e=B.jstmpl("invalid_link_card"),n={b_raf_li_in:this.$el.data("raf-li-in"),b_campaign_expired:this.$el.data("campaign-expired"),fe_companyname:B.env.b_companyname},i=t.show(e.render(n),{bCloseButton:!1,customWrapperClassName:"raf_invalid_modal_wrapper"});i&&i.loadComponents&&i.loadComponents(),$(".js-modal-close").click(function(){_i_("44d:766c755e"),t.hide(),_r_()}),_r_()}}),_r_()}),B.define("rewards-ui/ga-tracking",function(e,n,i){_i_("44d:27cb0e07");var t=e("ga-tracker"),a=B.env.fe_is_incentives_ga_tracking_enabled,_=function(){_i_("44d:f18fd2ab");var e=B.env.b_action;if("index"===e)return _r_("Index");if("searchresults"===e)return _r_("SR");if("hotel"===e)return _r_("HP");if("book"===e){var n=B.env.b_book_stage;return _r_("BS"+n)}return _r_("confirmation"===e?"Conf":"UnknownPage")}();i.exports={trackEvent:function(e,n,i,r){if(_i_("44d:b2ff4ba6"),!a)return _r_();void 0===n&&(n=_),t.trackEvent(t.incentivesTracker,e,n,i,r),_r_()}},_r_()}),B.define("component/rewards-ui/ribbon-reactive",["exports","module","component/reactive","server-data"],function(e,n,i,r){_i_("44d:bc920063"),booking.jstmpl("ribbon",function(){_i_("44d:ae03057d");var s,d=['<div\n    class="\n        rewards-ribbon\n        ',"-expanded","-collapsed","\n        ","-top",'\n    "\n>\n\n    ','\n        <button type="button" class="rewards-ribbon__icon-btn" aria-label="',"/private/a11y_cta_close/name",'">\n            ',"iconset/close","presentation","24","\n        </button>\n    ","\n\n    ",'\n        <button on:click="toggleExpandContent" type="button" class="rewards-ribbon__icon-btn">\n            ',"\n                ","iconset/navarrow_down","\n            ","iconset/navarrow_up",'\n\n    <div class="rewards-ribbon__collapsed">\n        ','\n            <i class="rewards-ribbon__icon rewards-incentippy" style="background-image: url(',');"></i>\n        ','\n            <i class="rewards-ribbon__icon rewards-incentippy"></i>\n        ','\n        <div class="rewards-ribbon__collapsed-content">\n            <div class="rewards-ribbon__collapsed-title">','</div>\n        </div>\n    </div>\n\n    <div class="rewards-ribbon__expanded">\n\n        ','\n\n            <div class="rewards-ribbon__expanded-title-wrapper">\n                ','\n                    <i class="rewards-ribbon__icon rewards-incentippy" style="background-image: url(',');"></i>\n                ','\n                    <i class="rewards-ribbon__icon rewards-incentippy"></i>\n                ','\n                <div class="rewards-ribbon__expanded-title">','</div>\n            </div>\n\n            <div class="rewards-ribbon__expanded-content">\n                <div class="rewards-ribbon__expanded-subtitle">\n\n                    ',"\n\n                    ",'\n\n                        <span class="rewards-ribbon__terms-link">\n                            <span class="bui-link" data-bui-component="Modal" data-modal-id="rewards-terms-popover" aria-label="',"/private/rewards_a11y_promo_code_more_details_open/name",'">\n                                ',"/private/reward_mini_tcs_entry_point_more_info/name","\n                            </span>\n                        </span>\n\n                        ",'\n    <template id="rewards-terms-popover">\n        <header class="bui-modal__header rewards-terms-popover">\n            ',"\n    <h3>\n        ","/private/reward_mini_tcs_title/name","\n    </h3>\n    <ol>\n        ","\n            <li>","</li>\n        ","\n\n        ",'<a href="','" class="bui-link" target="_blank">',"</a>","\n\n        <li>","/private/reward_mini_tcs_complete_tcs_link/name","</li>\n    </ol>\n",'\n        </header>\n        <footer class="bui-modal__footer">\n            <div class="bui-group bui-group--inline">\n                <button type="button" class="bui-button bui-button--primary" data-bui-ref="modal-close">\n                    <span class="bui-button__text">',"/private/incentives_engage_reward_modal_got_it_cta/name","</span>\n                </button>\n            </div>\n        </footer>\n    </template>\n",'\n    <div id="rewards-terms-popover" class="bui-panel bui-u-hidden rewards-terms-popover">\n        ',"\n    </div>\n","\n\n","\n\n                </div>\n\n                ",'\n    <span class="rewards-ribbon__link">\n        <span class="bui-link ',"bui-link--primary","\n        </span>\n    </span>\n",'\n    <span class="rewards-ribbon__link">\n        <a class="bui-link ','" href="',"\n        </a>\n    </span>\n","\n",'\n    <button class="rewards-ribbon__cta bui-button bui-button--',"secondary",'" type="button">\n        <span class="bui-button__text">',"</span>\n    </button>\n",'\n    <a class="rewards-ribbon__cta bui-button bui-button--','">\n        <span class="bui-button__text">',"</span>\n    </a>\n","\n\n\n","\n\n            </div>\n\n        ","\n\n            ",'\n                <img class="rewards-ribbon__img" src="','" alt=""/>\n            ','\n                <i class="rewards-ribbon__img rewards-incentippy" style="background-image: url(',');"></i>\n            ','\n                <i class="rewards-ribbon__img rewards-incentippy"></i>\n            ','\n                <i class="rewards-ribbon__img rewards-incentippy-big"></i>\n            ','\n\n            <div class="rewards-ribbon__expanded-content">\n\n                <div class="rewards-ribbon__expanded-title">','</div>\n                <div class="rewards-ribbon__expanded-subtitle">',"</div>\n\n                ",'\n\n                <span class="rewards-ribbon__terms-link">\n                    <span\n                        class="bui-link"\n                        data-bui-component="Popover"\n                        data-popover-content-id="rewards-terms-popover"\n                        ','\n                            data-popover-position="bottom"\n                        ','\n                            data-popover-position="top"\n                        ','\n                        tabindex="0"\n                    >\n\n                        ',"\n\n                    </span>\n                </span>\n\n                ","\n\n                ","\n    </div>\n\n</div>"],l=["is_container_expanded","placement","is_close_button_visible","site_type","is_toggle_button_visible","icon","copy","fe_start_link","url","fe_end_link","is_more_info_visible","link_action","cta_1_type","cta_1_action","cta_2_type","cta_2_action"];return _r_(function(n){_i_("44d:5c9b0ddd");var e,i="",r=this.fn;function t(e){return _i_("44d:ea2de9ac"),r.MJ(r.MB(l[3])+""=="mdot")?(e=o(e+=d[37]),e+=[d[50],r.ME(d[51],r.MB,r.MN,null),d[52]].join("")):(e=o(e+=d[53]),e+=d[54]),e+=d[55],_r_(e)}function a(e){return _i_("44d:1f9122fc"),r.MD(l[11])?(e+=d[57],r.MJ(r.MB(l[3])+""=="mdot")&&(e+=d[58]),e+=[d[8],r.F.entities((r.MC(l[6])||{}).link),d[59]].join("")):r.MJ(r.MG((r.MC(l[8])||{}).link))&&(e+=d[60],r.MJ(r.MB(l[3])+""=="mdot")&&(e+=d[58]),e+=[d[61],r.F.entities((r.MC(l[8])||{}).link),d[8],r.F.entities((r.MC(l[6])||{}).link),d[62]].join("")),e+=d[63],_r_(e)}function _(e){return _i_("44d:830b84c9"),e+=d[63],r.MD(l[13])?(e+=d[64],r.MD(l[12])?e+=r.F.entities(r.MC(l[12])):e+=d[65],e+=[d[66],r.F.entities((r.MC(l[6])||{}).cta_1),d[67]].join("")):r.MJ(r.MG((r.MC(l[8])||{}).cta_1))&&(e+=d[68],r.MD(l[12])?e+=r.F.entities(r.MC(l[12])):e+=d[65],e+=[d[61],r.F.entities((r.MC(l[8])||{}).cta_1),d[69],r.F.entities((r.MC(l[6])||{}).cta_1),d[70]].join("")),e+=d[71],r.MD(l[15])?(e+=d[64],r.MD(l[14])?e+=r.F.entities(r.MC(l[14])):e+=d[65],e+=[d[66],r.F.entities((r.MC(l[6])||{}).cta_2),d[67]].join("")):r.MJ(r.MG((r.MC(l[8])||{}).cta_2))&&(e+=d[68],r.MD(l[14])?e+=r.F.entities(r.MC(l[14])):e+=d[65],e+=[d[61],r.F.entities((r.MC(l[8])||{}).cta_2),d[69],r.F.entities((r.MC(l[6])||{}).cta_2),d[70]].join("")),e+=d[63],_r_(e)}function o(e){return _i_("44d:eecd35c0"),e+=[d[38],r.ME(d[39],r.MB,r.MN,null),d[40]].join(""),r.MJ(r.MG(((r.MC(l[6])||{}).terms||{}).reward))&&(e+=[d[41],r.F.entities(((r.MC(l[6])||{}).terms||{}).reward),d[42]].join("")),e+=d[43],r.MJ(r.MG(((r.MC(l[6])||{}).terms||{}).minimum_spend))&&(e+=[d[41],r.F.entities(((r.MC(l[6])||{}).terms||{}).minimum_spend),d[42]].join("")),e+=d[43],r.MJ(r.MG(((r.MC(l[6])||{}).terms||{}).expiration_date))&&(e+=[d[41],r.F.entities(((r.MC(l[6])||{}).terms||{}).expiration_date),d[42]].join("")),e+=d[43],r.MJ(r.MG(((r.MC(l[6])||{}).terms||{}).platform))&&(e+=[d[41],r.F.entities(((r.MC(l[6])||{}).terms||{}).platform),d[42]].join("")),e+=d[43],r.MJ(r.MG(((r.MC(l[6])||{}).terms||{}).maximum_reward))&&(e+=[d[41],r.F.entities(((r.MC(l[6])||{}).terms||{}).maximum_reward),d[42]].join("")),e+=d[43],r.MJ(r.MG(((r.MC(l[6])||{}).terms||{}).payback))&&(e+=[d[41],r.F.entities(((r.MC(l[6])||{}).terms||{}).payback),d[42]].join("")),e+=d[43],r.MJ(r.MG(((r.MC(l[6])||{}).terms||{}).payback_after_checkout))&&(e+=[d[41],r.F.entities(((r.MC(l[6])||{}).terms||{}).payback_after_checkout),d[42]].join("")),e+=d[43],r.MN(l[7],[d[44],r.F.entities((r.MC(l[8])||{}).faq),d[45]].join("")),e+=d[3],r.MN(l[9],d[46]),e+=[d[47],(n.unshift({end_link:r.MB(l[9]),start_link:r.MB(l[7])}),s=r.ME(d[48],r.MB,r.MN,null),n.shift(),s),d[49]].join(""),_r_(e)}return e=i,_i_("44d:171875b6"),e+=d[0],r.MD(l[0])?e+=d[1]:e+=d[2],e+=d[3],r.MJ(r.MB(l[1])+""=="top")&&(e+=d[4]),e+=d[5],r.MD(l[2])&&(e+=[d[6],r.ME(d[7],r.MB,r.MN,null),d[8],(n.unshift({name:d[9],role:d[10],width:d[11]}),s=r.HELPER("icon",n[0]),n.shift(),s),d[12]].join("")),e+=d[13],r.MD(l[4])&&(e+=d[14],r.MJ(r.MB(l[3])+""=="mdot")?e+=[d[15],(n.unshift({name:d[16],role:d[10],width:d[11]}),s=r.HELPER("icon",n[0]),n.shift(),s),d[17]].join(""):e+=[d[15],(n.unshift({name:d[18],role:d[10],width:d[11]}),s=r.HELPER("icon",n[0]),n.shift(),s),d[17]].join(""),e+=d[12]),e+=d[19],r.MJ(r.MG((r.MC(l[5])||{}).icon_url))?e+=[d[20],r.F.entities((r.MC(l[5])||{}).icon_url),d[21]].join(""):e+=d[22],e+=[d[23],r.F.entities((r.MC(l[6])||{}).title_collapsed),d[24]].join(""),r.MJ(r.MB(l[3])+""=="mdot")?(e+=d[25],r.MJ(r.MG((r.MC(l[5])||{}).icon_url))?e+=[d[26],r.F.entities((r.MC(l[5])||{}).icon_url),d[27]].join(""):e+=d[28],e+=[d[29],r.F.entities((r.MC(l[6])||{}).title_expanded),d[30],r.F.entities((r.MC(l[6])||{}).subtitle),d[31]].join(""),r.MD(l[10])&&(e=t(e+=[d[32],r.ME(d[33],r.MB,r.MN,null),d[34],r.ME(d[35],r.MB,r.MN,null),d[36]].join("")),e+=d[31]),e=a(e+=d[56]),e=_(e+=d[15])):(e+=d[73],r.MJ(r.MG((r.MC(l[5])||{}).image_url))?e+=[d[74],r.F.entities((r.MC(l[5])||{}).image_url),d[75]].join(""):r.MJ(r.MG((r.MC(l[5])||{}).icon_url))?e+=[d[76],r.F.entities((r.MC(l[5])||{}).icon_url),d[77]].join(""):r.MJ(r.MB(l[1])+""=="top")?e+=d[78]:e+=d[79],e=_(e+=d[73]),e+=[d[80],r.F.entities((r.MC(l[6])||{}).title_expanded),d[81],r.F.entities((r.MC(l[6])||{}).subtitle),d[82]].join(""),r.MD(l[10])&&(e+=d[83],r.MJ(r.MB(l[1])+""=="top")?e+=d[84]:e+=d[85],e=t(e+=[d[86],r.ME(d[35],r.MB,r.MN,null),d[87]].join("")),e+=d[88]),e=a(e+=d[88])),e+=d[72],e+=d[89],i=_r_(e),_r_(i)})}());var t={site_type:r.b_site_type,is_container_expanded:!!+r.fe_rewards_ribbon_feature_is_expanded,placement:r.fe_rewards_ribbon_feature_desktop_placement,is_close_button_visible:r.fe_rewards_ribbon_feature_close_button_show,is_toggle_button_visible:r.fe_rewards_ribbon_feature_toggle_button_show,is_more_info_visible:r.fe_rewards_ribbon_feature_toggle_more_info_show,link_action:r.fe_rewards_ribbon_feature_link1_action,cta_1_action:r.fe_rewards_ribbon_feature_cta1_action,cta_1_type:r.fe_rewards_ribbon_feature_cta1_type,cta_2_action:r.fe_rewards_ribbon_feature_cta2_action,cta_2_type:r.fe_rewards_ribbon_feature_cta2_type,icon:{icon_url:r.fe_rewards_ribbon_feature_icon_url,image_url:r.fe_rewards_ribbon_feature_image_url},copy:{title_expanded:r.fe_rewards_ribbon_copy_expanded_title,title_collapsed:r.fe_rewards_ribbon_copy_collapsed_title,subtitle:r.fe_rewards_ribbon_copy_expanded_subtitle,link:r.fe_rewards_ribbon_copy_link1,cta_1:r.fe_rewards_ribbon_copy_cta1,cta_2:r.fe_rewards_ribbon_copy_cta2,terms:{reward:r.fe_rewards_terms_popover_copy_reward,minimum_spend:r.fe_rewards_terms_popover_copy_minimum_spend,expiration_date:r.fe_rewards_terms_popover_copy_expiration_date,platform:r.fe_rewards_terms_popover_copy_platform,maximum_reward:r.fe_rewards_terms_popover_copy_maximum_reward,payback:r.fe_rewards_terms_popover_copy_payback,payback_after_checkout:r.fe_rewards_terms_popover_copy_payback_after_checkout}},url:{link:r.fe_rewards_ribbon_feature_link1_url,cta_1:r.fe_rewards_ribbon_feature_cta1_url,cta_2:r.fe_rewards_ribbon_feature_cta2_url,faq:r.b_nonsecure_hostname+"/content/referral-terms"+r.b_query_params_with_lang+r.b_query_params_delimiter+"is_incentive=1"}};n.exports=i.extend({initialState:t,template:"ribbon",afterRender:function(){_i_("44d:d1941f82"),this.BUI=window.BUI,this.BUI&&this.BUI.initComponents&&this.BUI.initComponents(this.el),_r_()},toggleExpandContent:function(){_i_("44d:3b0276d3"),this.setState({is_container_expanded:!this.getState().is_container_expanded}),_r_()}}),_r_()}),B.define("component/rewards-ui/ribbon",function(e,n,i){_i_("44d:0f3043a2");var r,t,a=e("component"),_=e("events"),o=e("rewards-ui/ga-tracking");"www"===B.env.b_site_type&&"index"===B.env.b_action&&(r=e("ultrafocus"))&&(t=r.getInstance("rewards-ribbon","[data-sb-outer]")),i.exports=a.extend({init:function(){_i_("44d:48b965e5"),this.initEvents(),_r_()},initEvents:function(){_i_("44d:27a35031"),this.$el.on("click",function(){_i_("44d:03058447"),this.$el.hasClass("-collapsed")&&this.toggleRibbon(),_r_()}.bind(this)),this.$el.find(".js-toggle").on("click",this.toggleRibbon.bind(this)),this.$el.find(".js-collapse").on("click",this.collapseRibbon.bind(this)),t&&t.on("ultrafocus::shown",function(){_i_("44d:a7983bf5"),$("#ss").focus(),_r_()}),"mdot"===B.env.b_site_type&&"hotel"===B.env.b_action&&B.eventNames&&(this.$el.after('<div id="js-rewards-ui-ribbon-placement"></div>'),_.on(B.eventNames.RT_ROOM_EXPAND,function(e){_i_("44d:fb49c190"),e.fullpage.$container.find(".js-rooms-page-loading").before(this.$el),_r_()}.bind(this)),_.on(B.eventNames.RT_ROOM_FOLD,function(){_i_("44d:6110acbb"),$("#js-rewards-ui-ribbon-placement").before(this.$el),_r_()}.bind(this))),_r_()},toggleRibbon:function(){return _i_("44d:90c52f87"),this.$el.toggleClass("-expanded -collapsed"),this.$el.hasClass("-expanded")&&this.trackExpanded(),_r_(!1)},collapseRibbon:function(){return _i_("44d:abe73d6f"),this.$el.removeClass("-expanded").addClass("-collapsed"),t&&t.show(),this.trackCollapsed(),_r_(!1)},trackExpanded:function(){_i_("44d:f5362c1e"),o.trackEvent("Ribbon-expand"),_r_()},trackCollapsed:function(){_i_("44d:5bbd7df3"),o.trackEvent("Ribbon-cta-click"),_r_()}}),_r_()}),B.define("component/rewards-ui/landing-reactive",["require","exports","module","component/reactive","server-data","jstmpl-translations","dismiss-item"],function(r,e,n,i,t,a,_){_i_("44d:876f481c"),booking.jstmpl("landing_modal",function(){_i_("44d:c524a15a");var o=['<div id="rewards-landing">\n    <div class="rewards-landing">\n        <header class="bui-modal__header rewards-modal-img" '," style=\"background-image: url('","');\"",'></header>\n        <div class="bui-modal__body bui-modal__body--primary rewards-landing__content">\n            <h3>',"</h3>\n            <p>","</p>\n\n            ","\n                <ul>\n                    ","\n                        <li>","</li>\n                    ","\n                </ul>\n            ",'\n\n            <p><a href="','" target="_blank" class="bui-link">','</a></p>\n        </div>\n        <footer class="bui-modal__footer">\n            <div class="bui-group bui-group--inline">\n                <button type="button" class="bui-button bui-button--primary" data-bui-ref="modal-close">\n                    <span class="bui-button__text">',"</span>\n                </button>\n            </div>\n        </footer>\n    </div>\n<div>"],s=["image_url","copy","has_list","url"];return _r_(function(a){_i_("44d:493b34b6");var e="",_=this.fn;return e=function(e){if(_i_("44d:8d27c671"),e+=o[0],_.MD(s[0])&&(e+=[o[1],_.F.entities(_.MC(s[0])),o[2]].join("")),e+=[o[3],_.F.entities((_.MC(s[1])||{}).title),o[4],_.F.entities((_.MC(s[1])||{}).subtitle),o[5]].join(""),_.MD(s[2])){e+=o[6];var n=(_.MC(s[1])||{}).list||[];a.unshift({item_list:null});for(var i,r=1,t=n.length;r<=t;r++)a[0].item_list=i=n[r-1],e+=[o[7],_.F.entities(i),o[8]].join("");a.shift(),e+=o[9]}return e+=[o[10],_.F.entities((_.MC(s[3])||{}).link),o[11],_.F.entities((_.MC(s[1])||{}).link),o[12],_.F.entities((_.MC(s[1])||{}).main_cta),o[13]].join(""),_r_(e)}(e),_r_(e)})}());var o={image_url:t.fe_rewards_landing_feature_image_url,has_list:!1,should_use_ultrafocus:"www"===t.b_site_type&&"index"===t.b_action,copy:{title:t.fe_rewards_landing_copy_title,subtitle:t.fe_rewards_landing_copy_subtitle,main_cta:t.fe_rewards_landing_copy_cta||a("convert_incentives_landing_modal_cta"),link:t.fe_rewards_landing_copy_link||a("convert_incentives_landing_modal_tcs_cta"),list:[].concat([t.fe_rewards_landing_copy_sr_point_1,t.fe_rewards_landing_copy_sr_point_2,t.fe_rewards_landing_copy_sr_point_3,t.fe_rewards_landing_copy_sr_point_4]).filter(function(e){return _i_("44d:183103b5"),_r_(0!=e)})},url:{link:t.fe_rewards_landing_feature_link_url||t.b_nonsecure_hostname+"/content/referral-terms"+t.b_query_params_with_lang+t.b_query_params_delimiter+"is_incentive=1"}};n.exports=i.extend({initialState:o,template:"landing_modal",initialize:function(){_i_("44d:9cf8e8d0");var e,n=this.getState(),i=window.BUI;n.should_use_ultrafocus&&(e=r("ultrafocus").getInstance("rewards-landing","[data-sb-outer]")),this.modal=i.createInstance("Modal",document.createElement("div"),{id:"rewards-landing",onAfterClose:function(){_i_("44d:7611db5e"),_("rewards_landing"),e&&e.show(),_r_()}}),this.modal.mount(),this.setState({has_list:!!n.copy.list.length}),_r_()},afterRender:function(){_i_("44d:6e11f168"),this.modal.open(),_r_()}}),_r_()}),B.define("component/rewards-ui/landing",function(e,n,i){_i_("44d:1ba8eb0f");var r,t,a=e("component"),_=e("dismiss-item"),o=window.BUI,s=e("jquery"),d=e("rewards-ui/ga-tracking");"www"===B.env.b_site_type&&"index"===B.env.b_action&&(r=e("ultrafocus"))&&(t=r.getInstance("rewards-landing","[data-sb-outer]")),i.exports=a.extend({init:function(){_i_("44d:937a73d9"),this.modal=o.createInstance("Modal",document.createElement("div"),{id:"rewards-landing",onAfterClose:function(){_i_("44d:796f1dac"),_("rewards_landing"),t&&t.show(),_r_()}}),t&&t.on("ultrafocus::shown",function(){_i_("44d:a7983bf51"),s("#ss").focus(),_r_()}),this.modal.mount(),this.modal.open(),this.initEvents(),_r_()},initEvents:function(){_i_("44d:2b31a0ae"),s(this.modal.modalEl).find(".js-main-cta").on("click",this.trackMainCta.bind(this)),_r_()},trackMainCta:function(){_i_("44d:96d27632"),d.trackEvent("Landing-cta-click"),_r_()}}),_r_()}),B.define("component/rewards-ui/offer-base",function(e,n,i){_i_("44d:420c82b7");var r=e("component"),t=e("jquery");i.exports=r.extend({rejectCampaign:function(){_i_("44d:47694e36"),t.ajax({url:(B.env.b_secure_domain||B.env.b_domain_for_book)+"/incentives/accept_or_reject_onsite",type:"post",data:{offer_status:"rejected"},xhrFields:{withCredentials:!0}}),_r_()},applyCampaign:function(){_i_("44d:b0185ff3"),this.onApplyStart(),this.hideError(),t.ajax({url:(B.env.b_secure_domain||B.env.b_domain_for_book)+"/incentives/accept_or_reject_onsite",type:"post",data:{offer_status:"accepted"},xhrFields:{withCredentials:!0},success:function(e){_i_("44d:ae48e12f"),e&&1===e.success?this.onApplySuccess(e):this.showError(),_r_()}.bind(this),error:function(){_i_("44d:b03990c0"),this.showError(),_r_()}.bind(this),complete:function(){_i_("44d:acfd7d10"),this.onApplyComplete(),_r_()}.bind(this)}),_r_()},initRibbon:function(){_i_("44d:14825841");var e=t("#rewards-ribbon").html();"mdot"===B.env.b_site_type?t(".tabbed-nav--content.tab-active").prepend(e):t("body").append(e),t(".rewards-ribbon").loadComponents(),window.BUI&&window.BUI.initComponents&&window.BUI.initComponents(t(".rewards-ribbon").get(0)),_r_()},onApplySuccess:function(){},onApplyStart:function(){},onApplyComplete:function(){},showError:function(){},hideError:function(){}}),_r_()}),B.define("component/rewards-ui/offer-modal",function(e,n,i){_i_("44d:9dd3c7bb");var r=e("component/rewards-ui/offer-base"),t=window.BUI,a=e("et"),_=e("jquery");i.exports=r.extend({init:function(){_i_("44d:f752b9b0"),this.expHash=this.$el.data("hash"),this.modal=t.createInstance("Modal",document.createElement("div"),{id:"rewards-offer-modal",onAfterOpen:function(){_i_("44d:0f48f41b"),this.$modalRoot=_(this.modal.getModalRoot()),this.initEvents(),_r_()}.bind(this),onBeforeClose:function(){_i_("44d:94284826"),this.campaignApplied||this.rejectCampaign(),_r_()}.bind(this)}),this.modal.mount(),this.modal.open(),_r_()},initEvents:function(){_i_("44d:ad293820"),this.$modalRoot.find(".js-reject").on("click",this.modal.close.bind(this.modal)),this.$modalRoot.find(".js-apply").on("click",this.applyCampaign.bind(this)),_r_()},rejectCampaign:function(){_i_("44d:3a1a79c8"),this.expHash&&a.customGoal(this.expHash,2),r.prototype.rejectCampaign.apply(this),_r_()},applyCampaign:function(){_i_("44d:0117da52"),this.expHash&&a.customGoal(this.expHash,1),r.prototype.applyCampaign.apply(this),_r_()},onApplySuccess:function(){_i_("44d:b9576e43"),this.campaignApplied=!0,this.modal.close(),this.initRibbon(),_r_()},onApplyStart:function(){_i_("44d:bb24459f"),this.$modalRoot.find(".js-apply").addClass("bui-is-loading"),_r_()},onApplyComplete:function(){_i_("44d:a9328f2a"),this.$modalRoot.find(".js-apply").removeClass("bui-is-loading"),_r_()},showError:function(){_i_("44d:a00bb60d"),this.$modalRoot.find(".rewards-offer-modal__error").removeClass("g-hidden"),_r_()},hideError:function(){_i_("44d:3c43d261"),this.$modalRoot.find(".rewards-offer-modal__error").addClass("g-hidden"),_r_()}}),_r_()}),B.define("component/rewards-ui/offer-ribbon",function(e,n,i){_i_("44d:620e87d6");var r=e("component/rewards-ui/offer-base"),t=e("et");i.exports=r.extend({init:function(){_i_("44d:b3e441b0"),this.expHash=this.$el.data("hash"),this.initEvents(),_r_()},initEvents:function(){_i_("44d:6b1a8c7c"),this.$el.find(".js-reject").on("click",this.rejectCampaign.bind(this)),this.$el.find(".js-apply").on("click",this.applyCampaign.bind(this)),_r_()},rejectCampaign:function(){_i_("44d:5bb74b82"),this.expHash&&t.customGoal(this.expHash,2),this.$el.remove(),r.prototype.rejectCampaign.apply(this),_r_()},applyCampaign:function(){_i_("44d:0117da521"),this.expHash&&t.customGoal(this.expHash,1),r.prototype.applyCampaign.apply(this),_r_()},onApplySuccess:function(){_i_("44d:632766b1"),this.$el.remove(),this.initRibbon(),_r_()},onApplyStart:function(){_i_("44d:f5da7e4e"),this.$el.find(".js-apply").addClass("bui-is-loading"),_r_()},onApplyComplete:function(){_i_("44d:3360c4ba"),this.$el.find(".js-apply").removeClass("bui-is-loading"),_r_()},showError:function(){_i_("44d:6781ab67"),this.$el.find(".rewards-offer-ribbon__error").removeClass("g-hidden"),_r_()},hideError:function(){_i_("44d:a0b5fc22"),this.$el.find(".rewards-offer-ribbon__error").addClass("g-hidden"),_r_()}}),_r_()}),B.define("component/rewards-ui/banner-reactive",["exports","module","component/reactive","server-data","jstmpl-translations","dismiss-item"],function(e,n,i,t,r,a){_i_("44d:63bc3dc5"),booking.jstmpl("banner",function(){_i_("44d:181e4629");var i,o=['\n<div\n    class="\n        bui-banner\n        ',"bui-u-bleed@small","\n        rewards-promo-banner\n        -action-","\n        ","bui-u-hidden",'\n    "\n>\n    ','\n        <div class="bui-banner__image-container">\n            <img class="bui-banner__image" src="','" alt=""/>\n        </div>\n    ','\n        <i class="bui-banner__icon rewards-incentippy"></i>\n    ','\n\n    <div class="bui-banner__content">\n        <div class="bui-banner__title">\n            ','\n        </div>\n\n        <p class="bui-banner__text">\n\n            ',"\n\n            ",'\n                <button\n                    on:click="openModal"\n                    class="bui-link"\n                    aria-label="',"/private/rewards_a11y_promo_code_more_details_open/name",'"\n                >\n                    ',"\n                </button>\n            ","\n\n        </p>\n\n        ",'\n\n            <span class="rewards-promo-banner__coupon-code ',"rewards-promo-banner__code-copy js-copy",'">\n                ',"\n                        ","\n                ","\n                    ","\n            </span>\n\n            ",'\n                <button type="button" ',"disabled",' class="bui-button bui-button--primary bui-banner__button js-copy">\n                    ',"\n\n        ",'\n            <a class="bui-button bui-button--secondary bui-banner__button" href="','" target="_blank">\n                <span class="bui-button__text">\n                    ',"\n                </span>\n            </a>\n        ",'\n\n    </div>\n\n    <button\n        on:click="closeBanner"\n        type="button"\n        class="bui-banner__close"\n        aria-label="',"/private/a11y_cta_close/name",'"\n    >\n        ',"","streamline/close","presentation","24","\n    </button>\n\n    ",'<template id="rewards-promo-modal">\n    <div class="rewards-promo-modal">\n\n        <header class="bui-modal__header rewards-modal-img"></header>\n\n        ','\n            <div class="bui-modal__body rewards-promo-modal__employee_banner">\n                <p class="rewards-promo-modal__employee_banner_text">\n                    ',"\n                </p>\n            </div>\n        ",'\n\n        <div class="bui-modal__body bui-modal__body--primary rewards-promo-modal__content">\n\n            <h3>',"</h3>\n\n            <p>","</p>\n\n            ","\n                <ol>\n                    ","\n                        <li>","</li>\n                    ","\n                </ol>\n            ",'\n                <p class="rewards-promo-modal__faq">\n                    <a href="','" target="_blank" class="bui-link">\n                        ',"\n                    </a>\n                </p>\n            ",'\n        </div>\n\n        <footer class="bui-modal__footer">\n\n            <div class="bui-group bui-group--inline">\n                ','\n                    <span class="rewards-promo-banner__coupon-code">\n                        ',"\n                            ",'\n                    </span>\n                    <button type="button" ',' class="bui-button bui-button--primary bui-banner__button js-copy js-copy-modal" >\n                        ',"\n                    </button>\n                ",'\n                    <button type="button" class="bui-button bui-button--primary" data-bui-ref="modal-close">\n                        ',"\n            </div>\n\n            ",'\n\n                <p class="rewards-promo-modal__fineprint">\n                    ','\n                </p>\n\n                <p class="rewards-promo-modal__faq">\n                    <a href="',"\n                    </a>\n                </p>\n\n            ","\n\n        </footer>\n    </div>\n</template>\n","\n    ","\n\n</div>"],s=["is_mdot_bleed_enabled","action_type","is_inline_reward_token","reward_token","is_banner_closed","url","copy","is_modal_enabled","is_reward_token_copy_enabled","is_token_just_copied","is_employee","has_more_info_list","is_more_info_reward_token_visible"];return _r_(function(a){_i_("44d:1fc34b1d");var e,n="",_=this.fn;return e=n,_i_("44d:badc6232"),e+=o[0],_.MD(s[0])&&(e+=o[1]),e+=[o[2],_.F.entities(_.MC(s[1])),o[3]].join(""),(_.MJ(_.MB(s[2]))&&_.MK(_.MB(s[3]))||_.MJ(_.MB(s[4])))&&(e+=o[4]),e+=o[5],_.MJ(_.MG((_.MC(s[5])||{}).image))?e+=[o[6],_.F.entities((_.MC(s[5])||{}).image),o[7]].join(""):e+=o[8],e+=[o[9],_.F.entities((_.MC(s[6])||{}).title),o[10],_.F.entities((_.MC(s[6])||{}).subtitle),o[11]].join(""),_.MD(s[7])&&(e+=[o[12],_.ME(o[13],_.MB,_.MN,null),o[14],_.F.entities((_.MC(s[6])||{}).more_info_cta),o[15]].join("")),e+=o[16],_.MK(_.MB(s[2]))&&(e+=o[17],_.MK(_.MB(s[8]))&&(e+=o[18]),e+=o[19],_.MD(s[9])?e+=[o[20],_.F.entities((_.MC(s[6])||{}).copy_cta_done),o[21]].join(""):e+=[o[22],_.F.entities(_.MC(s[3])),o[21]].join(""),e+=o[23],_.MD(s[8])&&(e+=o[24],_.MK(_.MB(s[3]))&&(e+=o[25]),e+=o[26],_.MD(s[9])?e+=[o[20],_.F.entities((_.MC(s[6])||{}).copy_cta_done),o[22]].join(""):e+=[o[20],_.F.entities((_.MC(s[6])||{}).copy_cta),o[22]].join(""),e+=o[15]),e+=o[27]),e+=o[27],_.MJ(_.MG((_.MC(s[5])||{}).cta))&&(e+=[o[28],_.F.entities((_.MC(s[5])||{}).cta),o[29],_.F.entities((_.MC(s[6])||{}).copy_link),o[30]].join("")),e+=[o[31],_.ME(o[32],_.MB,_.MN,null),o[33],(a.unshift({class:o[34],name:o[35],role:o[36],width:o[37]}),i=_.HELPER("icon",a[0]),a.shift(),i),o[38]].join(""),_.MD(s[7])&&(e=function(e){if(_i_("44d:4c15d1ce"),e+=o[39],_.MD(s[10])&&(e+=[o[40],_.F.entities((_.MC(s[6])||{}).employee),o[41]].join("")),e+=[o[42],_.F.entities((_.MC(s[6])||{}).more_info_title),o[43],_.F.entities((_.MC(s[6])||{}).more_info_subtitle),o[44]].join(""),_.MD(s[11])){e+=o[45];var n=(_.MC(s[6])||{}).more_info_list||[];a.unshift({item:null});for(var i,r=1,t=n.length;r<=t;r++)a[0].item=i=n[r-1],e+=[o[46],_.F.entities(i),o[47]].join("");a.shift(),e+=o[48]}return e+=o[11],_.MJ(_.MG((_.MC(s[6])||{}).more_info_fineprint))||(e+=[o[49],_.F.entities((_.MC(s[5])||{}).terms),o[50],_.F.entities((_.MC(s[6])||{}).more_info_terms),o[51]].join("")),e+=o[52],_.MD(s[12])?(e+=o[53],_.MD(s[3])?e+=[o[54],_.F.entities(_.MC(s[3])),o[20]].join(""):e+=[o[54],_.F.entities((_.MC(s[6])||{}).reward_token_loading),o[20]].join(""),e+=o[55],_.MK(_.MB(s[3]))&&(e+=o[25]),e+=[o[56],_.F.entities((_.MC(s[6])||{}).copy_cta),o[57]].join("")):e+=[o[58],_.F.entities((_.MC(s[6])||{}).more_info_inner_cta),o[57]].join(""),e+=o[59],_.MJ(_.MG((_.MC(s[6])||{}).more_info_fineprint))&&(e+=[o[60],_.F.entities((_.MC(s[6])||{}).more_info_fineprint),o[61],_.F.entities((_.MC(s[5])||{}).terms),o[50],_.F.entities((_.MC(s[6])||{}).more_info_terms),o[62]].join("")),e+=o[63],_r_(e)}(e+=o[3]),e+=o[64]),e+=o[65],n=_r_(e),_r_(n)})}());var _=[].concat(t.fe_rewards_promo_banner_copy_more_info_first_step,t.fe_rewards_promo_banner_copy_more_info_second_step,t.fe_rewards_promo_banner_copy_more_info_third_step).filter(function(e){return _i_("44d:9cbe34b3"),_r_(0!=e)}),o={is_banner_closed:!!+t.fe_is_rewards_promo_banner_dismissed,is_mdot_bleed_enabled:t.fe_rewards_promo_banner_feature_mdot_bleed,action_type:t.b_action,is_inline_reward_token:t.fe_rewards_promo_banner_feature_inline_reward_code,is_reward_token_copy_enabled:!t.fe_rewards_promo_banner_feature_no_copy_cta,reward_token:t.fe_reward_token,is_modal_enabled:t.fe_rewards_promo_banner_feature_modal,should_modal_auto_open:t.fe_rewards_promo_banner_feature_modal_auto_open&&!!+t.fe_is_rewards_promo_banner_modal_not_dismissed,url:{image:t.fe_rewards_promo_banner_feature_image,cta:t.fe_rewards_promo_banner_feature_cta_url,terms:t.b_nonsecure_hostname+"/content/referral-terms"+t.b_query_params_with_lang+t.b_query_params_delimiter+"is_incentive=1"},copy:{title:t.fe_rewards_promo_banner_copy_title,subtitle:t.fe_rewards_promo_banner_copy_subtitle,more_info_cta:r("convert_incentives_index_card_more_info_cta"),reward_token_loading:r("incentives_engage_reward_banner_loading"),copy_cta:r("convert_incentives_index_card_copy_cta"),copy_cta_done:r("convert_incentives_index_card_copy_cta_copied"),copy_link:t.fe_rewards_promo_banner_copy_cta,employee:r("incentives_emk_employee_banner_text"),more_info_title:t.fe_rewards_promo_banner_copy_more_info_title,more_info_subtitle:t.fe_rewards_promo_banner_copy_more_info_subtitle,more_info_fineprint:t.fe_rewards_promo_banner_copy_more_info_fineprint,more_info_terms:r("convert_incentives_index_card_more_information_tcs"),more_info_list:_,more_info_inner_cta:r("convert_incentives_index_card_more_information_ok_cta")},is_employee:t.fe_reward_is_for_employee,has_more_info_list:!!_.length,is_more_info_reward_token_visible:t.fe_rewards_promo_banner_feature_show_more_info_coupon||t.fe_rewards_promo_banner_feature_modal_auto_open&&!!+t.fe_is_rewards_promo_banner_modal_not_dismissed,is_token_just_copied:!1};n.exports=i.extend({initialState:o,template:"banner",afterRender:function(){_i_("44d:3b86042e");var e=this.getState(),n=window.BUI,i=this;this.timeoutID=null,this.modal=n.createInstance("Modal",document.createElement("div"),{id:"rewards-promo-modal",onBeforeOpen:function(){_i_("44d:cccbe58a"),this.modalEl.addEventListener("click",i.copyRewardToken.bind(i)),_r_()},onAfterClose:function(){_i_("44d:1b5897fe"),this.modalEl.removeEventListener("click",i.copyRewardToken.bind(i)),_r_()}}),this.modal&&this.modal.mount(),this.modal&&e.should_modal_auto_open&&(this.modal.open(),a("rewards_promo_banner_modal_auto_open"),this.setState({should_modal_auto_open:!1})),this.el.addEventListener("click",i.copyRewardToken.bind(i)),_r_()},openModal:function(){_i_("44d:6e11f1681"),this.modal.open(),_r_()},closeBanner:function(){_i_("44d:5064fc2e"),this.setState({is_banner_closed:!0}),a("rewards_promo_banner"),_r_()},copyRewardToken:function(n){if(_i_("44d:ac1c0a81"),n.target.matches(".js-copy")&&!this.timeoutID){var i=this.getState();clearTimeout(this.timeoutID);var e=document.createElement("textarea");e.style.fontSize="12pt",e.style.border="0",e.style.padding="0",e.style.margin="0",e.style.position="absolute",e.style[t.b_lang_rtl?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;e.style.top=r+"px",e.setAttribute("readonly",""),e.value=i.reward_token,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length),document.execCommand("copy")&&(n.target.matches(".js-copy-modal")?(n.target.innerHTML=i.copy.copy_cta_done,this.timeoutID=setTimeout(function(e){_i_("44d:2bd95979"),n.target.innerHTML=i.copy.copy_cta,e.timeoutID=null,_r_()},2e3,this)):(this.setState({is_token_just_copied:!0}),this.timeoutID=setTimeout(function(e){_i_("44d:5cbb5095"),e.setState({is_token_just_copied:!1}),e.timeoutID=null,_r_()},2e3,this))),document.body.removeChild(e),e=null}_r_()}}),_r_()}),B.define("component/rewards-ui/promo-banner",function(e,n,i){_i_("44d:42eb683d");var r=e("component"),t=e("dismiss-item"),a=window.BUI,_=e("referral/clipboard"),o=e("et"),s=e("jquery");i.exports=r.extend({init:function(){_i_("44d:2412d04c"),this.code=this.$el.data("token");var e=this.$el.find(".js-more-info")[0];e&&(this.modal=a.getInstance(e),this.modal&&this.modal.props&&(this.modal.props.onAfterOpen=function(){_i_("44d:e84636ce"),this.$modalRoot=s(this.modal.getModalRoot()),this.$modalRoot.find(".js-copy").on("click",this.copyCode.bind(this)),this.code&&(this.$modalRoot.find(".js-code").text(this.code),this.$modalRoot.find(".js-copy").removeAttr("disabled")),_r_()}.bind(this),this.modal.props.onAfterClose=function(){_i_("44d:f5f1821c"),this.$modalRoot=null,_r_()}.bind(this))),this.initEvents(),this.$el.data("modal-auto-open")&&this.modal&&(this.modal.open(),t("rewards_promo_banner_modal_auto_open")),_r_()},initEvents:function(){_i_("44d:a57ba5a3"),this.$el.find(".js-copy").on("click",this.copyCode.bind(this)),this.$el.find(".js-code-toast").on("click",this.copyInlineCode.bind(this)),_r_()},copyCode:function(e){if(_i_("44d:dbf7b15f"),this.copyToClipboardAnimation)return _r_();var n=s(e.currentTarget),i=n.find(".js-copy-text");this.copyCodeToClipboard(i),"banner"===n.data("placement")?(o.customGoal("fDeYAeaDUGTMbYRabbHVJNLDOeHbC",1),o.customGoal("fDeYAeaDUGTBEUWHJEeeKET",1),"mdot"===B.env.b_site_type&&o.customGoal("fDeYAeaDUGTCDWOOWNMFEDOeHbC",2)):"modal"===n.data("placement")&&(o.customGoal("fDeYAeaDUGTMbYRabbHVJNLDOeHbC",2),o.customGoal("fDeYAeaDUGTBEUWHJEeeKET",2)),o.customGoal("fDeYAeaeZeZQAFIVZOFNRfDRfYSbC",1),_r_()},copyInlineCode:function(e){if(_i_("44d:80130ec4"),this.copyToClipboardAnimation)return _r_();this.copyCodeToClipboard(s(e.currentTarget)),_r_()},copyCodeToClipboard:function(i){_i_("44d:f491d6a7");var r=this;_.copy(this.code,function(e){if(_i_("44d:d9f96b13"),e)return _r_(!1);r.copyToClipboardAnimation=!0;var n=i.html();i.html(B.jstmpl.translations("convert_incentives_index_card_copy_cta_copied")),i.addClass("rewards-promo-banner__code-copy-animation"),setTimeout(function(){_i_("44d:14317159"),i.html(n),i.removeClass("rewards-promo-banner__code-copy-animation"),r.copyToClipboardAnimation=!1,_r_()},2e3),_r_()}),_r_()}}),_r_()}),B.define("component/rewards-ui/bp-notice",function(e,n,i){_i_("44d:9cdd3195");var r=e("component"),t=e("events");i.exports=r.extend({init:function(){_i_("44d:5bb9e5f7"),1===this.$el.data("show-only-for-pay-later")&&t.on("payment:pay_online:changed",this.handlePayOnlineChanged.bind(this)),_r_()},handlePayOnlineChanged:function(e){_i_("44d:1b2ed250"),e?this.$el.fadeOut("slow"):this.$el.fadeIn("slow"),_r_()}}),_r_()}),B.define("component/rewards-ui/promo-code-storage",function(e,n,i){var r;_i_("44d:33ee5288");try{(r=window.localStorage).setItem("_t","_"),r.removeItem("_t")}catch(e){r=null}var t="rewardCouponCode";i.exports={setCoupon:function(e){_i_("44d:06d72f22"),r&&r.setItem(t,e),_r_()},getCoupon:function(){return _i_("44d:15e5148b"),_r_(r?r.getItem(t):null)},removeCoupon:function(){_i_("44d:ad56fcbe"),r&&r.removeItem(t),_r_()}},_r_()}),B.define("component/rewards-ui-redux/promo-code-actions",["exports","module","jquery","component/rewards-ui-redux/promo-code-reducer","server-data","jstmpl","component/rewards-ui/promo-code-storage"],function(e,n,a,i,_,r,o){_i_("44d:ccab8292");var s=_.b_secure_domain||_.b_secure_hostname;n.exports={REMOVE_STORED_REWARD:"REMOVE_STORED_REWARD",SET_COUPON_CODE:"SET_COUPON_CODE",REQUEST_REWARD_ACTIVATION:"REQUEST_REWARD_ACTIVATION",RESPONSE_REWARD_ACTIVATION_FAIL:"RESPONSE_REWARD_ACTIVATION_FAIL",RESPONSE_REWARD_ACTIVATION_SUCCESS:"RESPONSE_REWARD_ACTIVATION_SUCCESS",REQUEST_REWARD_REMOVAL:"REQUEST_REWARD_REMOVAL",RESPONSE_REWARD_REMOVAL_SUCCESS:"RESPONSE_REWARD_REMOVAL_SUCCESS",RESPONSE_REWARD_REMOVAL_FAIL:"RESPONSE_REWARD_REMOVAL_FAIL",TOGGLE_FORM_VISIBILITY:"TOGGLE_FORM_VISIBILITY",RETRIEVE_STORED_REWARD_CODE:"RETRIEVE_STORED_REWARD_CODE",TOGGLE_ACCORDION_VISIBILITY:"TOGGLE_ACCORDION_VISIBILITY",resetCouponForm:function(){return _i_("44d:9c2fd7fb"),_r_({type:this.REMOVE_STORED_REWARD})},setCouponCode:function(e){return _i_("44d:ef33ca72"),_r_({type:this.SET_COUPON_CODE,payload:e})},fetchingActiveReward:function(){return _i_("44d:b4d58d01"),_r_({type:this.REQUEST_REWARD_ACTIVATION})},fetchingRewardRemoval:function(){return _i_("44d:e0e49b4b"),_r_({type:this.REQUEST_REWARD_REMOVAL})},handleRewardError:function(e){return _i_("44d:373728b0"),_r_({type:this.RESPONSE_REWARD_ACTIVATION_FAIL,payload:e})},handleRewardSuccess:function(e,n){return _i_("44d:7ea87806"),_r_({type:this.RESPONSE_REWARD_ACTIVATION_SUCCESS,payload:{reward:e,reward_code:n}})},handleRemoveRewardSuccess:function(){return _i_("44d:594f068f"),_r_({type:this.RESPONSE_REWARD_REMOVAL_SUCCESS})},handleRemoveRewardFail:function(){return _i_("44d:2f8c6325"),_r_({type:this.RESPONSE_REWARD_REMOVAL_FAIL})},toggleFormVisibility:function(e){return _i_("44d:41042448"),_r_({type:this.TOGGLE_FORM_VISIBILITY})},handleRetrieveStoredReward:function(e){return _i_("44d:5367d9ee"),_r_({type:this.RETRIEVE_STORED_REWARD_CODE,payload:e})},toggleAccordionVisibility:function(){return _i_("44d:7cdd0ca1"),_r_({type:this.TOGGLE_ACCORDION_VISIBILITY})},getStoredRewardCode:function(){return _i_("44d:9df360f2"),_r_(function(e){_i_("44d:971768a9");var n=this._hasStoredIncentives();e(this.handleRetrieveStoredReward(n)),n&&e(this.requestActiveReward(n,!0)),_r_()}.bind(this))},requestActiveReward:function(r,t){return _i_("44d:01335115"),_r_(function(i){_i_("44d:ff115159"),i(this.fetchingActiveReward());var e=_.b_hotel_doesnt_need_cc_data&&document.querySelector("#email").value;if(0==r.length)return i(this.handleRewardError(this._errorMessage("E_NO_INCENTIVE_LINK"))),_r_();if(r===o.getCoupon()&&!t)return i(this.handleRewardError(this._errorMessage("E_ALREADY_REDEEMED"))),_r_();if(_.b_hotel_doesnt_need_cc_data&&!_.fe_email_for_coupons&&!e)return i(this.handleRewardError(this._errorMessage("E_EMAIL_MISSING"))),_r_();a.ajax({url:s+"/reward/validate_coupon",method:"POST",contentType:"application/json",data:JSON.stringify(this._createValidateCouponData(r,e)),context:this,success:function(e){if(_i_("44d:861df602"),e.valid)i(this.handleRewardSuccess(e,r));else if(t)i(this.resetCouponForm());else{var n=0<e.error_messages.length?e.error_messages:this._errorMessage("E_UNKNOWN_ERROR");i(this.handleRewardError(n))}_r_()},error:function(e){_i_("44d:498734e4"),i(this.handleRewardError(this._errorMessage("E_UNKNOWN_ERROR"))),_r_()},xhrFields:{withCredentials:!0}}),_r_()}.bind(this))},requestRemoveReward:function(){return _i_("44d:b40aef9d"),_r_(function(n){_i_("44d:00a5d7e2"),n(this.fetchingRewardRemoval()),a.ajax({url:s+"/incentives/clear_active",method:"POST",contentType:"application/json",data:JSON.stringify({}),context:this,success:function(e){_i_("44d:34f4b018"),n(this.handleRemoveRewardSuccess()),_r_()},error:function(e){_i_("44d:5c36c1c6"),n(this.handleRemoveRewardFail()),_r_()},xhrFields:{withCredentials:!0}}),_r_()}.bind(this))},_createValidateCouponData:function(e,n){return _i_("44d:1748616b"),_r_({user_id:_.b_reg_user_id,booker_email:_.fe_email_for_coupons||n,user_language_code:_.fe_user_language_for_coupons,checkin_date:_.b_checkin_date_ymd,checkout_date:_.b_checkout_date_ymd,hotel_id:_.b_hotel_id,total_price:{amount:Number(_.fe_current_value_for_coupons),currency:_.fe_user_currency_code_for_coupons},coupon_code:e})},_hasStoredIncentives:function(){_i_("44d:671d4c56");var e=_.fe_incentives_coupon_code||"",n=o.getCoupon()||"";return _r_(e||n)},_errorMessage:function(e){_i_("44d:0fe3cf2a");var n=[];return n.push(r("error_msgs").render({reward_error:e})),_r_(n)}},_r_()}),B.define("component/rewards-ui-redux/promo-code-base",["exports","module","component/reactive","component/rewards-ui-redux/promo-code-templates","component/rewards-ui-redux/promo-code-reducer","component/rewards-ui-redux/promo-code-actions","component/rewards-ui-redux/promo-code-selectors","jstmpl","server-data"],function(e,n,i,r,t,a,_,o,s){_i_("44d:180ba7ab"),n.exports=i.extend({store:t,initialState:t.getState(),template:"promo_card_block",initialize:function(){_i_("44d:097a3de9"),this.BUI=window.BUI||null,this.modal=this.BUI&&this.BUI.createInstance("Modal",document.createElement("div"),{id:"rewards-modal-error"}),this.modalIsMounted=!1,this.el.addEventListener("click",this.handleRemoveCard.bind(this)),this.store.subscribe(this._initComponent.bind(this)),this.store.dispatch(a.getStoredRewardCode()),this.setState({mdot_static_container:s.b_user_has_valid_incentive}),_r_()},handleInputChange:function(e){_i_("44d:b77e65f6"),this.store.dispatch(a.setCouponCode(e.target.value)),_r_()},handleInputKeydown:function(e){_i_("44d:39745870"),13===e.keyCode&&(e.preventDefault(),this.store.dispatch(a.requestActiveReward(this.store.getState().ui.coupon_code))),_r_()},handleSubmitButton:function(){_i_("44d:aa03631b"),this.store.dispatch(a.requestActiveReward(this.store.getState().ui.coupon_code)),_r_()},handleRemoveCard:function(e){_i_("44d:b9f6af01"),e.target.matches(".js-promo-code-card-remove")&&(e.preventDefault(),this.store.dispatch(a.requestRemoveReward())),_r_()},toggleFormVisibility:function(e){_i_("44d:636a4812"),e.preventDefault(),this.store.dispatch(a.toggleFormVisibility(this.store.getState().ui.isFormHidden)),_r_()},toggleAccordionVisibility:function(e){_i_("44d:f85728e9"),e.preventDefault(),this.store.dispatch(a.toggleAccordionVisibility()),_r_()},_initComponent:function(){_i_("44d:cb674b4e");var e=this.store.getState();_.hasValidReward(e)&&this.BUI&&this.BUI.initComponents&&window.BUI.initComponents(this.el.querySelector(".js-promo-code-card")),_.shouldOpenNonEligibleModal(e)&&!this.modalIsMounted?(this.modalIsMounted=!0,this.modal.mount(),this.modal.updateContent(o("error_modal").render({store:e})),this.modal.open()):!_.shouldOpenNonEligibleModal(e)&&this.modalIsMounted&&(this.modalIsMounted=!1,this.modal.unmount()),_r_()}}),_r_()}),B.define("component/rewards-ui-redux/promo-code-reducer",["exports","module","redux","component/rewards-ui-redux/promo-code-actions","component/rewards-ui-redux/promo-code-reducer-middlewares","redux-thunk"],function(e,n,i,r,t,a){_i_("44d:14726b50");var _={reward:{reward_code:""},ui:{isLoading:!1,isFormHidden:!1,isMdotAccordionOpen:!1,coupon_code:""},error:{hasErrors:!1,errorMsg:[]}},o=["REWARD_TYPE_CASHBACK","REWARD_TYPE_VIRTUAL_CREDIT","REWARD_TYPE_CASHOUT","REWARD_TYPE_NON_MONETARY","REWARD_TYPE_INSTANT_DISCOUNT","REWARD_TYPE_REDEEMABLE_COUPON","REWARD_TYPE_VOUCHER"];var s=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({name:"incentive_coupons/store"})||i.compose;n.exports=i.createStore(i.combineReducers({reward:function(e,n){switch(_i_("44d:287c39f8"),e=e||_.reward,n.type){case r.RESPONSE_REWARD_REMOVAL_FAIL:case r.RESPONSE_REWARD_REMOVAL_SUCCESS:return _r_(_.reward);case r.RESPONSE_REWARD_ACTIVATION_SUCCESS:return _r_(Object.assign({},e,{reward_code:n.payload.reward_code,hasValidReward:!!n.payload.reward.valid,isEligible:!!n.payload.reward.eligible,formatted_expiry_date:n.payload.reward.formatted_expiry_date,copy:{title:n.payload.reward.reward_details.rewards[0].title,message:n.payload.reward.reward_details.rewards[0].text,conditions:n.payload.reward.conditions,non_eligible:n.payload.reward.error_messages},image:n.payload.reward.reward_details.rewards[0].image_url,url:{faq:n.payload.reward.reward_details.rewards[0].faq_url,terms:n.payload.reward.reward_details.rewards[0].terms_url},reward_type:o[n.payload.reward.reward_details.rewards[0].reward_type-1],campaign_tag:n.payload.reward.campaign_details.tag}));default:return _r_(e)}_r_()},ui:function(e,n){switch(_i_("44d:09c5fb1d"),e=e||_.ui,n.type){case r.REMOVE_STORED_REWARD:return _r_(_.ui);case r.SET_COUPON_CODE:return _r_(Object.assign({},e,{coupon_code:n.payload}));case r.TOGGLE_FORM_VISIBILITY:return _r_(Object.assign({},e,{isFormHidden:!e.isFormHidden}));case r.REQUEST_REWARD_REMOVAL:return _r_(Object.assign({},e,{isLoading:!0}));case r.RESPONSE_REWARD_REMOVAL_FAIL:case r.RESPONSE_REWARD_REMOVAL_SUCCESS:return _r_(Object.assign({},e,{isLoading:!1,isFormHidden:!1,coupon_code:""}));case r.REQUEST_REWARD_ACTIVATION:return _r_(Object.assign({},e,{isLoading:!0}));case r.RESPONSE_REWARD_ACTIVATION_FAIL:return _r_(Object.assign({},e,{isLoading:!1}));case r.RESPONSE_REWARD_ACTIVATION_SUCCESS:return _r_(Object.assign({},e,{isLoading:!1,isFormHidden:!0,isMdotAccordionOpen:!0,coupon_code:""}));case r.RETRIEVE_STORED_REWARD_CODE:return _r_(Object.assign({},e,{coupon_code:n.payload}));case r.TOGGLE_ACCORDION_VISIBILITY:return _r_(Object.assign({},e,{isMdotAccordionOpen:!e.isMdotAccordionOpen}));default:return _r_(e)}_r_()},error:function(e,n){switch(_i_("44d:f65df34c"),e=e||_.error,n.type){case r.REMOVE_STORED_REWARD:case r.SET_COUPON_CODE:return _r_(_.error);case r.RESPONSE_REWARD_REMOVAL_FAIL:case r.RESPONSE_REWARD_REMOVAL_SUCCESS:return _r_(_.error);case r.RESPONSE_REWARD_ACTIVATION_FAIL:return _r_(Object.assign({},e,{hasErrors:!!n.payload.length,errorMsg:n.payload}));case r.RESPONSE_REWARD_ACTIVATION_SUCCESS:return _r_(_.error);default:return _r_(e)}_r_()}}),_,s(i.applyMiddleware(a.default||a,t.etTrackingMiddleware,t.storageMiddleware))),_r_()}),B.define("component/rewards-ui-redux/promo-code-templates",function(){_i_("44d:aae95f4a"),booking.jstmpl("promo_card_block",function(){_i_("44d:7a3e65eb");var d,l=['<div class="bp_sidebar_content_block promo-code">\n    <div class="bp_sidebar_content_block__header">\n        <h2 class="bp_sidebar_content_block__header_title">\n            ',"\n                ","/private/www_promo_code_bs3_list_title/name","\n            ","/private/desktop_bs3_do_you_have_a_promo_code/name",'\n        </h2>\n    </div>\n    <div class="bp_sidebar_content_block__section">\n        ','<div class="promo-code-card js-promo-code-card">\n    <div class="promo-code-card__main">\n        ','\n            <img class="promo-code-card__image" src="','" alt=""/>\n        ','\n\n        <div class="promo-code-card__content">\n            <h3 class="promo-code-card__title">\n                ','\n            </h3>\n\n            <p class="promo-code-card__message">\n                ','\n            </p>\n\n            <div class="promo-code-card__conditions">\n                <div class="promo-code-card__condition">\n                    ',"iconset/calendar","small","\n                    ","\n                        ","/private/www_promo_code_bs3_card_condition_expiry/name","/private/incentives_coupon_card_no_expiration/name",'\n                </div>\n                <div class="promo-code-card__condition">\n                    ',"iconset/gift","\n                            ","/private/www_promo_code_bs3_card_condition_type_wc/name","/private/www_promo_code_bs3_card_condition_type_cc/name",'\n                </div>\n            </div>\n\n            <div class="promo-code-card__actions">\n                <span class="bui-link bui-link--primary" data-bui-component="Popover" data-popover-content-id="promo-code-terms" data-popover-position="top">\n                    ',"/private/www_promo_code_bs3_card_cta_more_info/name",'\n                </span>\n                <button class="bui-link bui-link--primary js-promo-code-card-remove" ',"disabled"," >\n                    ","/private/www_promo_code_bs3_card_cta_remove/name","\n                </button>\n            </div>\n\n        </div>\n    </div>\n\n    ",'\n        <div class="promo-code-card__error_container">\n            ','\n                <div class="bui-alert bui-alert--error bui-alert--inline" role="status">\n                    <span class="icon--hint bui-alert__icon" role="presentation">\n                        ',"iconset/warning","presentation","24",'\n                    </span>\n                    <div class="bui-alert__description">\n                        <p class="bui-alert__text">',"</p>\n                    </div>\n                </div>\n            ","\n        </div>\n    ",'\n\n\n    <div id="promo-code-terms" class="bui-panel bui-u-hidden promo-code-terms">\n        <h3>',"/private/rewards_code_redeem_more_details/name","</h3>\n        <ol>\n            ","\n                <li>","</li>\n            ",'\n        </ol>\n        <p>\n            <a href="','" class="bui-link" target="_blank">\n                ',"/private/rewards_more_details_ts_and_cs/name",'\n            </a>\n        </p>\n        <p>\n            <a href="',"/private/rewards_more_details_faq/name","\n            </a>\n        </p>\n    </div>\n</div>","\n        ",'\n<button on:click="toggleFormVisibility" class="bui-link bui-link--primary promo-code__replace ',"g-hidden"," ","-open",'">\n    ',"/private/rewards_code_redeem_replace/name",'\n</button>\n\n<div class="promo-code__form'," bui-has-error",'">\n    <div class="bui-group bui-group--large">\n        <div class="bui-group__item">\n            <div class="bui-form__group bp_form__field">\n                <label class="bui-form__label" for="coupon_code">\n                    ',"/private/rewards_bs3_enter_your_promo_code/name",'\n                </label>\n\n                <input type="text" on:input="handleInputChange" on:keydown="handleInputKeydown" id="coupon_code" class="bui-form__control" autocomplete="false" name="coupon_code_input" value="','" ','/>\n                <input type="hidden" class="" name="coupon_code" value="','"/>\n\n                ','\n                <div class="bui-form__error">\n                    <ul class="promo-code-error">\n                        ','\n                            <li class="error-no_mark">\n                                <span>',"</span>\n                            </li>\n                        ","\n                    </ul>\n                </div>\n                ",'\n\n            </div>\n            <div class="bui-group__item">\n                <button on:click="handleSubmitButton" class="bui-button bui-button--secondary ',"bui-is-loading",'" type="button" ','>\n                    <div class="bui-button__loader">\n                        <div class="bui-spinner">\n                            <div class="bui-spinner__inner"></div>\n                        </div>\n                    </div>\n                    <span class="bui-button__text">\n                        ',"/private/growth_marketing_fake_promo_code_cta/name","\n                    </span>\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n","\n    </div>\n</div>\n"],c=["store"];return _r_(function(o){_i_("44d:e81cbfda");var e,n="",s=this.fn;return e=n,_i_("44d:6e6bae53"),e+=l[0],s.MJ(s.MG(((s.MC(c[0])||{}).reward||{}).hasValidReward))?e+=[l[1],s.ME(l[2],s.MB,s.MN,null),l[3]].join(""):e+=[l[1],s.ME(l[4],s.MB,s.MN,null),l[3]].join(""),e+=l[5],s.MJ(s.MG(((s.MC(c[0])||{}).reward||{}).hasValidReward))&&(e=function(e){_i_("44d:f1319f10"),e+=l[6],s.MJ(s.MG(((s.MC(c[0])||{}).reward||{}).isEligible))?e+=[l[7],s.F.entities(((s.MC(c[0])||{}).reward||{}).image),l[8]].join(""):e+=[l[7],s.STATIC_HOSTNAME("/static/img/coupon/inactive_code.png",0,0,0,0),l[8]].join(""),e+=[l[9],s.F.entities((((s.MC(c[0])||{}).reward||{}).copy||{}).title),l[10],s.F.entities((((s.MC(c[0])||{}).reward||{}).copy||{}).message),l[11],(o.unshift({color:"#6B6B6B",name:l[12],size:l[13]}),d=s.HELPER("icon",o[0]),o.shift(),d),l[14]].join(""),s.MJ(s.MG(((s.MC(c[0])||{}).reward||{}).formatted_expiry_date))?e+=[l[15],(o.unshift({date_with_year:s.MG(((s.MC(c[0])||{}).reward||{}).formatted_expiry_date)}),d=s.ME(l[16],s.MB,s.MN,null),o.shift(),d),l[14]].join(""):e+=[l[15],s.ME(l[17],s.MB,s.MN,null),l[14]].join(""),e+=[l[18],(o.unshift({color:"#6B6B6B",name:l[19],size:l[13]}),d=s.HELPER("icon",o[0]),o.shift(),d),l[14]].join("");var n=s.MG(((s.MC(c[0])||{}).reward||{}).reward_type);if(s.MJ(n+""=="REWARD_TYPE_CASHBACK")?e+=[l[20],s.ME(l[21],s.MB,s.MN,null),l[15]].join(""):s.MJ(n+""=="REWARD_TYPE_VIRTUAL_CREDIT")?e+=[l[20],s.ME(l[21],s.MB,s.MN,null),l[15]].join(""):s.MJ(n+""=="REWARD_TYPE_CASHOUT")&&(e+=[l[20],s.ME(l[22],s.MB,s.MN,null),l[15]].join("")),e+=[l[23],s.ME(l[24],s.MB,s.MN,null),l[25]].join(""),s.MJ(s.MG(((s.MC(c[0])||{}).ui||{}).isLoading))&&(e+=l[26]),e+=[l[27],s.ME(l[28],s.MB,s.MN,null),l[29]].join(""),!s.MJ(s.MG(((s.MC(c[0])||{}).reward||{}).isEligible))){e+=l[30];var i=(((s.MC(c[0])||{}).reward||{}).copy||{}).non_eligible||[];o.unshift({error:null});for(var r,t=1,a=i.length;t<=a;t++)o[0].error=r=i[t-1],e+=[l[31],(o.unshift({name:l[32],role:l[33],width:l[34]}),d=s.HELPER("icon",o[0]),o.shift(),d),l[35],s.F.html(r),l[36]].join("");o.shift(),e+=l[37]}e+=[l[38],s.ME(l[39],s.MB,s.MN,null),l[40]].join("");var i=(((s.MC(c[0])||{}).reward||{}).copy||{}).conditions||[];o.unshift({condition:null});for(var _,t=1,a=i.length;t<=a;t++)o[0].condition=_=i[t-1],e+=[l[41],s.F.html(_),l[42]].join("");return o.shift(),e+=[l[43],s.F.entities((((s.MC(c[0])||{}).reward||{}).url||{}).terms),l[44],s.ME(l[45],s.MB,s.MN,null),l[46],s.F.entities((((s.MC(c[0])||{}).reward||{}).url||{}).faq),l[44],s.ME(l[47],s.MB,s.MN,null),l[48]].join(""),_r_(e)}(e+=l[3]),e+=l[49]),e=function(e){if(_i_("44d:2b2d6ed3"),e+=l[50],s.MJ(s.MG(((s.MC(c[0])||{}).reward||{}).hasValidReward))||(e+=l[51]),e+=l[52],s.MJ(s.MG(((s.MC(c[0])||{}).ui||{}).isFormHidden))||(e+=l[53]),e+=[l[54],s.ME(l[55],s.MB,s.MN,null),l[56]].join(""),s.MJ(s.MC(c[0]).error.hasErrors)&&(e+=l[57]),e+=l[52],s.MJ(s.MG(((s.MC(c[0])||{}).ui||{}).isFormHidden))&&(e+=l[51]),e+=[l[58],s.ME(l[59],s.MB,s.MN,null),l[60],s.F.entities(((s.MC(c[0])||{}).ui||{}).coupon_code),l[61]].join(""),s.MJ(s.MG(((s.MC(c[0])||{}).ui||{}).isLoading))&&(e+=l[26]),e+=[l[62],s.F.entities(((s.MC(c[0])||{}).reward||{}).reward_code),l[63]].join(""),s.MJ(s.MC(c[0]).error.hasErrors)){e+=l[64];var n=((s.MC(c[0])||{}).error||{}).errorMsg||[];o.unshift({error:null});for(var i,r=1,t=n.length;r<=t;r++)o[0].error=i=n[r-1],e+=[l[65],s.F.html(i),l[66]].join("");o.shift(),e+=l[67]}return e+=l[68],s.MJ(s.MG(((s.MC(c[0])||{}).ui||{}).isLoading))&&(e+=l[69]),e+=l[70],s.MJ(s.MG(((s.MC(c[0])||{}).ui||{}).isLoading))&&(e+=l[26]),e+=[l[71],s.ME(l[72],s.MB,s.MN,null),l[73]].join(""),_r_(e)}(e+=l[49]),e+=l[74],n=_r_(e),_r_(n)})}()),booking.jstmpl("error_msgs",function(){_i_("44d:ab293aa0");var t=["/private/www_promo_code_bs3_error_invalid/name","\n","/private/www_promo_code_bs3_error_already_used/name","/private/www_promo_code_bs3_error_unknown/name","/private/rewards_redeem_enter_email_first_error/name"],a=["reward_error"];return _r_(function(e){_i_("44d:e1d7f70c");var n,i="",r=this.fn;return n=i,_i_("44d:812d9dc3"),r.MJ(r.MB(a[0])+""=="E_NO_INCENTIVE_LINK")?n+=[r.ME(t[0],r.MB,r.MN,null),t[1]].join(""):r.MJ(r.MB(a[0])+""=="E_ALREADY_REDEEMED")?n+=[r.ME(t[2],r.MB,r.MN,null),t[1]].join(""):r.MJ(r.MB(a[0])+""=="E_UNKNOWN_ERROR")?n+=[r.ME(t[3],r.MB,r.MN,null),t[1]].join(""):r.MJ(r.MB(a[0])+""=="E_EMAIL_MISSING")&&(n+=[r.ME(t[4],r.MB,r.MN,null),t[1]].join("")),i=_r_(n),_r_(i)})}()),booking.jstmpl("error_modal",function(){_i_("44d:c5fd074b");var o,s=['<div id="rewards-modal-error">\n    <div class="rewards-modal-error">\n        <header class="bui-modal__header rewards-modal-error__header">\n            <img class="rewards-modal__error-img" src="','" alt=""/>\n        </header>\n        <div class="bui-modal__body bui-modal__body--primary rewards-modal-error__content">\n            <h3 class="rewards-modal-error__title">',"/private/rewards_book_again_bs3_modal_headline/name",'</h3>\n            <p class="rewards-modal-error__body">',"/private/rewards_book_again_bs3_modal_body/name","</p>\n\n            ",'\n                <div class="bui-alert bui-alert--error bui-alert--inline rewards-modal-error__errors" role="status">\n                    <span class="icon--hint bui-alert__icon" role="presentation">\n                        ',"streamline/warning","presentation","24",'\n                    </span>\n                    <div class="bui-alert__description">\n                        <p class="bui-alert__text rewards-modal-error__error_message">',"</p>\n                    </div>\n                </div>\n            ",'\n\n        </div>\n        <footer class="bui-modal__footer">\n            <p class="rewards-modal-error__link"><a href="','" target="_blank" class="bui-link">',"/private/rewards_book_again_bs3_modal_ts_cs/name",'</a></p>\n            <div class="bui-group bui-group--inline">\n                <button type="button" class="bui-button bui-button--primary js-main-cta" data-bui-ref="modal-close">\n                    <span class="bui-button__text">',"/private/rewards_book_again_bs3_modal_ok/name","</span>\n                </button>\n            </div>\n        </footer>\n    </div>\n</div>"],d=["store"];return _r_(function(a){_i_("44d:6922a5e7");var e="",_=this.fn;return e=function(e){_i_("44d:42546980"),e+=[s[0],_.STATIC_HOSTNAME("/static/img/incentives/incentippy_gray.svg",0,0,0,0),s[1],_.ME(s[2],_.MB,_.MN,null),s[3],_.ME(s[4],_.MB,_.MN,null),s[5]].join("");var n=(((_.MC(d[0])||{}).reward||{}).copy||{}).non_eligible||[];a.unshift({error_message:null});for(var i,r=1,t=n.length;r<=t;r++)a[0].error_message=i=n[r-1],e+=[s[6],(a.unshift({name:s[7],role:s[8],width:s[9]}),o=_.HELPER("icon",a[0]),a.shift(),o),s[10],_.F.html(i),s[11]].join("");return a.shift(),e+=[s[12],_.F.entities((((_.MC(d[0])||{}).reward||{}).url||{}).terms),s[13],_.ME(s[14],_.MB,_.MN,null),s[15],_.ME(s[16],_.MB,_.MN,null),s[17]].join(""),_r_(e)}(e),_r_(e)})}()),_r_()}),B.define("component/rewards-ui-redux/promo-code-selectors",["exports","module"],function(e,n){_i_("44d:c546b0eb"),n.exports={shouldOpenNonEligibleModal:function(e){return _i_("44d:180670e9"),_r_(!e.reward.isEligible&&"force_majeure_campaign"===e.reward.campaign_tag)},hasValidReward:function(e){return _i_("44d:8165b2dd"),_r_(e.reward&&e.reward.hasValidReward)}},_r_()}),B.define("component/rewards-ui-redux/promo-code-reducer-middlewares",["exports","module","component/rewards-ui-redux/promo-code-actions","et","component/rewards-ui/promo-code-storage"],function(e,n,i,r,t){_i_("44d:532cb048"),n.exports={etTrackingMiddleware:function(e){return _i_("44d:bd8c8b37"),_r_(function(n){return _i_("44d:166d52fe"),_r_(function(e){switch(_i_("44d:1b082a40"),e.type){case i.REQUEST_REWARD_ACTIVATION:return r.customGoal("fDeYAebeVNLDFeSICZYXXSHbRXQadHVT",1),_r_(n(e));case i.RESPONSE_REWARD_ACTIVATION_SUCCESS:return r.customGoal("fDeYAebeVNLDFeSICZYXXSHbRXQadHVT",2),_r_(n(e));case i.REQUEST_REWARD_REMOVAL:return r.customGoal("fDeYAebeVNLDFeSICZYXXSHbRXQadHVT",3),_r_(n(e));case i.RESPONSE_REWARD_REMOVAL_FAIL:case i.RESPONSE_REWARD_REMOVAL_SUCCESS:return r.customGoal("fDeYAebeVNLDFeSICZYXXSHbRXQadHVT",4),_r_(n(e));default:return _r_(n(e))}_r_()})})},storageMiddleware:function(e){return _i_("44d:e9736847"),_r_(function(n){return _i_("44d:c6f16c2d"),_r_(function(e){switch(_i_("44d:15ae06d0"),e.type){case i.REMOVE_STORED_REWARD:return t.removeCoupon(),_r_(n(e));case i.RESPONSE_REWARD_ACTIVATION_SUCCESS:return t.setCoupon(e.payload.reward_code),_r_(n(e));case i.RESPONSE_REWARD_REMOVAL_FAIL:case i.RESPONSE_REWARD_REMOVAL_SUCCESS:return t.removeCoupon(),_r_(n(e));default:return _r_(n(e))}_r_()})})}},_r_()}),B.define("component/rewards-ui/promo-code-actions",["jquery","exports","module","server-data","et"],function(r,e,n,t,a){_i_("44d:1242bcd7");var _=t.b_secure_domain||t.b_secure_hostname;n.exports={getCoupon:function(n,i){_i_("44d:0a75f76d"),r.ajax({url:_+"/incentives/get_active_token",method:"GET",success:function(e){_i_("44d:d8544c73"),e.token?n(e.token):i(),_r_()},error:function(e){_i_("44d:790b4076"),i(),_r_()},xhrFields:{withCredentials:!0}}),_r_()},validateCoupon:function(e,n){var i;_i_("44d:13cd2352"),a.customGoal("fDeYAebeVNLDFeSICZYXXSHbRXQadHVT",1),r.ajax({url:_+"/reward/validate_coupon",method:"POST",contentType:"application/json",data:JSON.stringify((i=e,_i_("44d:4d02849f"),_r_({user_id:t.b_reg_user_id,booker_email:t.b_email||i.booker_email,user_language_code:t.fe_user_language_for_coupons,checkin_date:t.b_checkin_date_ymd,checkout_date:t.b_checkout_date_ymd,hotel_id:t.b_hotel_id,total_price:{amount:i.transaction_value,currency:t.fe_user_currency_code_for_coupons},coupon_code:i.reward_code}))),success:function(e){_i_("44d:7c31cd43"),e.valid&&a.customGoal("fDeYAebeVNLDFeSICZYXXSHbRXQadHVT",2),n(e),_r_()},error:function(e){_i_("44d:9b136413"),n(e),_r_()},xhrFields:{withCredentials:!0}}),_r_()},removeCoupon:function(e){_i_("44d:c8816e85"),a.customGoal("fDeYAebeVNLDFeSICZYXXSHbRXQadHVT",3),r.ajax({url:_+"/incentives/clear_active",method:"POST",contentType:"application/json",data:JSON.stringify({}),success:function(){_i_("44d:82151d42"),a.customGoal("fDeYAebeVNLDFeSICZYXXSHbRXQadHVT",4),e(),_r_()},error:function(){_i_("44d:9a54da66"),a.customGoal("fDeYAebeVNLDFeSICZYXXSHbRXQadHVT",4),e(),_r_()},xhrFields:{withCredentials:!0}}),_r_()}},_r_()}),B.define("component/rewards-ui/promo-code-templates",function(e,n){_i_("44d:9d34a5b7"),booking.jstmpl("reward_invalid_message",function(){_i_("44d:e45df557");var o,s=['<ul class="promo-code-error">\n    ',"\n        ","\n            <li>\n                <span>\n                    ","24","iconset/info_sign","presentation","\n                </span>\n                <span>","</span>\n            </li>\n        ","\n    ","\n        <li>\n            <span>\n                ","\n            </span>\n            <span>\n                ","/private/www_promo_code_bs3_error_expired/name","\n                ","/private/www_promo_code_bs3_error_unknown/name","/private/www_promo_code_bs3_error_invalid/name","/private/www_promo_code_bs3_error_already_used/name","/private/rewards_redeem_enter_email_first_error/name","/private/rewards_redeem_server_error/name","\n            </span>\n        </li>\n    ","\n</ul>\n\n"],d=["reward_error"];return _r_(function(a){_i_("44d:4aed12b5");var e="",_=this.fn;return e=function(e){if(_i_("44d:7d336068"),e+=s[0],_.MJ(_.MG((_.MC(d[0])||{}).reasons))){e+=s[1];var n=(_.MC(d[0])||{}).reasons||[];a.unshift({txt:null});for(var i,r=1,t=n.length;r<=t;r++)a[0].txt=i=n[r-1],e+=[s[2],(a.unshift({color:"#FCB4B4",height:s[3],name:s[4],role:s[5],width:s[3]}),o=_.HELPER("icon",a[0]),a.shift(),o),s[6],_.F.html(i),s[7]].join("");a.shift(),e+=s[8]}else e+=[s[9],(a.unshift({color:"#FCB4B4",height:s[3],name:s[4],role:s[5],width:s[3]}),o=_.HELPER("icon",a[0]),a.shift(),o),s[10]].join(""),_.MJ(_.MC(d[0]).status+""=="E_EXPIRED_COUPON")?e+=[(a.unshift({numeric_date:_.MG(((_.MC(d[0])||{}).data||{}).expired_on)}),o=_.ME(s[11],_.MB,_.MN,null),a.shift(),o),s[12]].join(""):_.MJ(_.MC(d[0]).status+""=="E_UNKNOWN_USER")?e+=[_.ME(s[13],_.MB,_.MN,null),s[12]].join(""):_.MJ(_.MC(d[0]).status+""=="E_NO_INCENTIVE_LINK")?e+=[_.ME(s[14],_.MB,_.MN,null),s[12]].join(""):_.MJ(_.MC(d[0]).status+""=="E_NO_SHARE_LINK")?e+=[_.ME(s[14],_.MB,_.MN,null),s[12]].join(""):_.MJ(_.MC(d[0]).status+""=="E_NO_CAMPAIGN_DETAILS")?e+=[_.ME(s[13],_.MB,_.MN,null),s[12]].join(""):_.MJ(_.MC(d[0]).status+""=="E_USED_INCENTIVE_LINK")?e+=[_.ME(s[15],_.MB,_.MN,null),s[12]].join(""):_.MJ(_.MC(d[0]).status+""=="E_ALREADY_REDEEMED")?e+=[_.ME(s[15],_.MB,_.MN,null),s[12]].join(""):_.MJ(_.MC(d[0]).status+""=="E_UNKNOWN_ERROR")?e+=[_.ME(s[13],_.MB,_.MN,null),s[12]].join(""):_.MJ(_.MC(d[0]).status+""=="E_NETWORK_ERROR")?e+=[_.ME(s[13],_.MB,_.MN,null),s[12]].join(""):_.MJ(_.MC(d[0]).status+""=="E_EMAIL_MISSING")?e+=[_.ME(s[16],_.MB,_.MN,null),s[12]].join(""):e+=[_.ME(s[17],_.MB,_.MN,null),s[12]].join(""),e+=s[18];return e+=s[19],_r_(e)}(e),_r_(e)})}()),booking.jstmpl("coupon_card",function(){_i_("44d:f660dee2");var d,l=["\n",'\n\n<div class="promo-code-card ',"-error",' js-promo-code-card">\n\n    <div class="promo-code-card__main">\n\n        ','\n        <img class="promo-code-card__image -valid" src="','" alt=""/>\n        ','\n\n        <img class="promo-code-card__image -error" src="','" alt=""/>\n\n        <div class="promo-code-card__content">\n\n            <h3 class="promo-code-card__title">',"</h3>\n            ",'\n                <p class="promo-code-card__message">',"</p>\n            ","\n\n            ",'\n            \n            <div class="promo-code-card__conditions">\n                <div class="promo-code-card__condition">\n                    ',"iconset/calendar","small","\n                    ","\n                        ","/private/www_promo_code_bs3_card_condition_expiry/name","/private/incentives_coupon_card_no_expiration/name","\n                </div>\n                \n                ",'\n                    <div class="promo-code-card__condition">\n                        ',"iconset/gift","\n                                \n                                ","/private/www_promo_code_bs3_card_condition_type_wc/name","\n                            ","/private/www_promo_code_bs3_card_condition_type_cc/name","\n                    </div>\n                ",'\n            </div>\n\n            <div class="promo-code-card__actions">\n                <span class="bui-link bui-link--primary js-promo-code-card-more-info-cta"\n                    data-bui-component="Popover"\n                    data-popover-content-id="promo-code-terms"\n                    data-popover-position="top"\n                    tabindex="0">\n                    ',"/private/rewards_code_redeem_more_details/name",'\n                </span>\n                <span class="bui-link bui-link--primary js-promo-code-card-remove" tabindex="0">\n                    ',"/private/rewards_code_redeem_remove/name","\n                </span>\n            </div>\n            ",'\n        </div>\n    </div>\n\n    <div class="promo-code-card__error js-promo-code-card-error">\n        ','\n            <div class="bui-alert bui-alert--error bui-alert--inline" role="status">\n                <span class="icon--hint bui-alert__icon" role="presentation">\n                    ',"iconset/warning","presentation","24",'\n                </span>\n                <div class="bui-alert__description">\n                    <p class="bui-alert__text">',"</p>\n                </div>\n            </div>\n        ","\n    </div>\n\n    ",'\n        <div id="promo-code-terms" class="bui-panel bui-u-hidden promo-code-terms">\n            <h3>',"</h3>\n            <ol>\n                ","\n                    <li>","</li>\n                ",'\n            </ol>\n            <p>\n                <a href="','" class="bui-link" target="_blank">\n                    ',"/private/rewards_more_details_ts_and_cs/name",'\n                </a>\n            </p>\n            <p>\n                <a href="',"/private/rewards_more_details_faq/name","\n                </a>\n            </p>\n        </div>\n\n        ",'<template id="rewards-modal-error">\n    <div class="rewards-modal-error">\n        <header class="bui-modal__header rewards-modal-error__header">\n            <img class="rewards-modal__error-img" src="','" alt=""/>\n        </header>\n        <div class="bui-modal__body bui-modal__body--primary rewards-modal-error__content">\n            <h3 class="rewards-modal-error__title">',"/private/rewards_book_again_bs3_modal_headline/name",'</h3>\n            <p class="rewards-modal-error__body">',"/private/rewards_book_again_bs3_modal_body/name","</p>\n\n            ",'\n                <div class="bui-alert bui-alert--error bui-alert--inline rewards-modal-error__errors" role="status">\n                    <span class="icon--hint bui-alert__icon" role="presentation">\n                        ','\n                    </span>\n                    <div class="bui-alert__description">\n                        <p class="bui-alert__text rewards-modal-error__error_message">',"</p>\n                    </div>\n                </div>\n            ",'\n\n        </div>\n        <footer class="bui-modal__footer">\n            <p class="rewards-modal-error__link"><a href="','" target="_blank" class="bui-link">',"/private/rewards_book_again_bs3_modal_ts_cs/name",'</a></p>\n            <div class="bui-group bui-group--inline">\n                <button type="button" class="bui-button bui-button--primary js-main-cta" data-bui-ref="modal-close">\n                    <span class="bui-button__text">',"/private/rewards_book_again_bs3_modal_ok/name","</span>\n                </button>\n            </div>\n        </footer>\n    </div>\n</template>","\n    ","\n</div>\n"],c=["reward_data","coupon_data","fe_coupon_details","is_small_coupon","fe_reward_details"];return _r_(function(o){_i_("44d:c3d8fb4b");var e="",s=this.fn;return e=function(e){if(_i_("44d:bb3ca979"),s.MN("fe_reward_details",s.MB(c[0])),e+=l[0],s.MN("fe_coupon_details",s.MB(c[1])),e+=l[1],s.MJ(s.MG((s.MC(c[2])||{}).eligible))||(e+=l[2]),e+=l[3],s.MJ(s.MB(c[3]))?e+=[l[4],s.STATIC_HOSTNAME("/static/img/incentives/incentippy.svg",0,0,0,0),l[5]].join(""):e+=[l[4],s.F.html((s.MC(c[4])||{}).image_url),l[5]].join(""),e+=[l[6],s.STATIC_HOSTNAME("/static/img/coupon/inactive_code.png",0,0,0,0),l[7],s.F.html((s.MC(c[4])||{}).title),l[8]].join(""),s.MJ(s.MG((s.MC(c[4])||{}).text))&&(e+=[l[9],s.F.html((s.MC(c[4])||{}).text),l[10]].join("")),e+=l[11],s.MK(s.MB(c[3]))){if(e+=[l[12],(o.unshift({color:"#6B6B6B",name:l[13],size:l[14]}),d=s.HELPER("icon",o[0]),o.shift(),d),l[15]].join(""),s.MJ(s.MG((s.MC(c[2])||{}).formatted_expiry_date))?e+=[l[16],(o.unshift({date_with_year:s.MG((s.MC(c[2])||{}).formatted_expiry_date)}),d=s.ME(l[17],s.MB,s.MN,null),o.shift(),d),l[15]].join(""):e+=[l[16],s.ME(l[18],s.MB,s.MN,null),l[15]].join(""),e+=l[19],s.MJ(s.MC(c[4]).reward_type)&&s.MJ(s.MC(c[4]).reward_type<4)){e+=[l[20],(o.unshift({color:"#6B6B6B",name:l[21],size:l[14]}),d=s.HELPER("icon",o[0]),o.shift(),d),l[16]].join("");var n=s.MG((s.MC(c[4])||{}).reward_type);s.MJ(n+""=="1")?e+=[l[22],s.ME(l[23],s.MB,s.MN,null),l[24]].join(""):s.MJ(n+""=="2")?e+=[l[22],s.ME(l[23],s.MB,s.MN,null),l[24]].join(""):s.MJ(n+""=="3")&&(e+=[l[22],s.ME(l[25],s.MB,s.MN,null),l[24]].join("")),e+=l[26]}e+=[l[27],s.ME(l[28],s.MB,s.MN,null),l[29],s.ME(l[30],s.MB,s.MN,null),l[31]].join("")}e+=l[32];var i=(s.MC(c[2])||{}).error_messages||[];o.unshift({txt:null});for(var r,t=1,a=i.length;t<=a;t++)o[0].txt=r=i[t-1],e+=[l[33],(o.unshift({name:l[34],role:l[35],width:l[36]}),d=s.HELPER("icon",o[0]),o.shift(),d),l[37],s.F.html(r),l[38]].join("");if(o.shift(),e+=l[39],s.MK(s.MB(c[3]))){var _;for(e+=[l[40],s.ME(l[28],s.MB,s.MN,null),l[41]].join(""),i=(s.MC(c[2])||{}).conditions||[],o.unshift({condition:null}),t=1,a=i.length;t<=a;t++)o[0].condition=_=i[t-1],e+=[l[42],s.F.html(_),l[43]].join("");o.shift(),e=function(e){_i_("44d:1321244b"),e+=[l[50],s.STATIC_HOSTNAME("/static/img/incentives/incentippy_gray.svg",0,0,0,0),l[51],s.ME(l[52],s.MB,s.MN,null),l[53],s.ME(l[54],s.MB,s.MN,null),l[55]].join("");var n=(s.MC(c[2])||{}).error_messages||[];o.unshift({error_message:null});for(var i,r=1,t=n.length;r<=t;r++)o[0].error_message=i=n[r-1],e+=[l[56],(o.unshift({name:l[34],role:l[35],width:l[36]}),d=s.HELPER("icon",o[0]),o.shift(),d),l[57],s.F.html(i),l[58]].join("");return o.shift(),e+=[l[59],s.F.entities((s.MC(c[4])||{}).terms_url),l[60],s.ME(l[61],s.MB,s.MN,null),l[62],s.ME(l[63],s.MB,s.MN,null),l[64]].join(""),_r_(e)}(e+=[l[44],s.F.html((s.MC(c[4])||{}).terms_url),l[45],s.ME(l[46],s.MB,s.MN,null),l[47],s.F.html((s.MC(c[4])||{}).faq_url),l[45],s.ME(l[48],s.MB,s.MN,null),l[49]].join("")),e+=l[65]}return e+=l[66],_r_(e)}(e),_r_(e)})}()),_r_()}),B.define("component/rewards-ui/promo-code-base",["jquery","et","exports","module","component","events","rewards-ui/ga-tracking","component/rewards-ui/promo-code-storage","component/rewards-ui/promo-code-actions","component/rewards-ui/promo-code-templates","server-data"],function(e,i,n,r,t,a,_,o,s,d,l){_i_("44d:8263ef79");var c=0;r.exports=t.extend({init:function(){_i_("44d:ee2a46af"),this.isFirstKeyStroke=!0,this.isCouponRetrievedLocally=!1,this.BUI=window.BUI||{},this.HIDE_CLASS="g-hidden",this.COUPON_INVALID_CLASS="bui-has-error",this.BUTTON_IS_LOADING_CLASS="bui-is-loading",this.REWARD_CARD_SELECTOR=".js-promo-code-card",this.REWARD_REMOVE_LINK_SELECTOR=".js-promo-code-card-remove",this.REWARD_MORE_INFO_LINK_SELECTOR=".js-promo-code-card-more-info-cta",this.$emailInput=e("#email"),this.$msgList=this.$el.find(".js-promo-code-messages"),this.$replace=this.$el.find(".js-promo-code-replace"),this.$form=this.$el.find(".js-promo-code-form"),this.$input=this.$form.find(".js-promo-code-input"),this.$hiddenInput=this.$form.find(".js-coupon-code-input"),this.$error=this.$form.find(".js-promo-code-error"),this.$submit=this.$form.find(".js-promo-code-button"),this.$title=this.$el.find(".js-promo-code-title"),this.$submitText=this.$submit.find(".bui-button__text"),this.REWARDS_COUPON_GET="rewards_coupon:request_get",this.REWARDS_COUPON_REQUEST_ADD="rewards_coupon:request_add",this.REWARDS_COUPON_REQUEST_REMOVE="rewards_coupon:request_remove",this.REWARDS_COUPON_ADDED="rewards_coupon:success",this.REWARDS_COUPON_REMOVED="rewards_coupon:removed",this.REWARDS_COUPON_INVALID="rewards_coupon:invalid",_r_()},initEvents:function(){_i_("44d:7dc53946"),this.modal=this.BUI.createInstance("Modal",document.createElement("div"),{id:"rewards-modal-error"}),this.modal.mount(),this.$replace.click(this.DOM_onReplaceClick.bind(this)),this.$input.keydown(this.onInputChange.bind(this)),this.$submit.click(this.onSubmit.bind(this,this.REWARDS_COUPON_REQUEST_ADD)),this.$msgList.on("click",this.REWARD_REMOVE_LINK_SELECTOR,this.onSubmit.bind(this,this.REWARDS_COUPON_REQUEST_REMOVE)),this.$msgList.on("click",this.REWARD_MORE_INFO_LINK_SELECTOR,this.trackMoreInfoClick.bind(this)),"www"===l.b_site_type&&this.$msgList.on("hover",this.REWARD_MORE_INFO_LINK_SELECTOR,this.trackMoreInfoHover.bind(this)),"www"===l.b_site_type&&this.setInitialState(),this.onSubmit(this.REWARDS_COUPON_GET),_r_()},DOM_onReplaceClick:function(){_i_("44d:259610f3"),this.trackReplaceCouponClick(),this.$replace.hasClass("-open")?(this.$replace.removeClass("-open"),this.$form.addClass(this.HIDE_CLASS)):(this.$replace.addClass("-open"),this.$form.removeClass(this.HIDE_CLASS),this.$input.focus(),this.trackReplaceCoupon()),_r_()},DOM_resetForm:function(){_i_("44d:51626f23"),this.$error.empty(),this.$form.removeClass(this.COUPON_INVALID_CLASS),_r_()},DOM_onLoadingStart:function(){_i_("44d:21fa0f31"),this.$submit.addClass(this.BUTTON_IS_LOADING_CLASS),this.$submit.attr("disabled","disabled"),this.$input.attr("disabled","disabled"),_r_()},DOM_onLoadingFinish:function(){_i_("44d:cd442cf7"),this.$submit.removeClass(this.BUTTON_IS_LOADING_CLASS),this.$submit.removeAttr("disabled"),this.$input.removeAttr("disabled"),_r_()},DOM_onError:function(){_i_("44d:5ffae75a"),this.$form.addClass(this.COUPON_INVALID_CLASS),this.$input.focus(),_r_()},onInputChange:function(e){if(_i_("44d:5f65a9e4"),l.fe_email_for_coupons&&this.isFirstKeyStroke&&e.which&&(this.isFirstKeyStroke=!1),13===e.which)return this.onSubmit(this.REWARDS_COUPON_REQUEST_ADD),_r_(!1);this.DOM_resetForm(),_r_()},_getCommand:function(){_i_("44d:b0d65bdd");var e=o.getCoupon();e?(this.isCouponRetrievedLocally=!0,this._addCommand(e)):s.getCoupon(this._addCommand.bind(this),this.DOM_onLoadingFinish.bind(this)),_r_()},_clearCommand:function(){_i_("44d:c40fc259"),s.removeCoupon(function(){_i_("44d:d71c06b0"),this.$hiddenInput.val(""),o.removeCoupon(),this.isCouponRetrievedLocally=!1,this.DOM_onLoadingFinish(),this.$input.focus(),a.emit(this.REWARDS_COUPON_REMOVED),this.trackRemoveCoupon(),_r_()}.bind(this)),_r_()},_addCommand:function(e){_i_("44d:d1a2ff10"),e&&this.$input.val(e);var n={reward_code:this.getCouponValueFromInput(),transaction_value:l.fe_current_value_for_coupons-c};if("mdot"===l.b_site_type&&l.b_hotel_doesnt_need_cc_data){if(!this.$emailInput||!this.$emailInput.val())return this.DOM_onError(),this.createInvalidElem({status:"E_EMAIL_MISSING"}),this.DOM_onLoadingFinish(),_r_(!1);n.booker_email=this.$emailInput.val().trim()}s.validateCoupon(n,this.rewardCouponCallback.bind(this)),_r_()},getCouponValueFromInput:function(){return _i_("44d:287240d2"),_r_(this.$input.val().trim().toUpperCase().replace(/\s/g,""))},clientValidations:function(e){return _i_("44d:09f66037"),!e||e.length<1?_r_("E_NO_INCENTIVE_LINK"):o.getCoupon()===e?_r_("E_ALREADY_REDEEMED"):_r_(null)},onSubmit:function(e){_i_("44d:c0453dd8");var n={};if(e===this.REWARDS_COUPON_REQUEST_REMOVE?this.trackRemoveCouponClick():e===this.REWARDS_COUPON_REQUEST_ADD&&this.trackAddCouponClick(),e===this.REWARDS_COUPON_REQUEST_ADD){n.reward_code=this.getCouponValueFromInput();var i=this.clientValidations(n.reward_code);if(i)return this.DOM_onError(),a.emit(this.REWARDS_COUPON_INVALID),this.createInvalidElem({status:i}),_r_(!1)}if(e!==this.REWARDS_COUPON_REQUEST_ADD&&e!==this.REWARDS_COUPON_GET||(n.transaction_value=l.fe_current_value_for_coupons-c),e===this.REWARDS_COUPON_REQUEST_REMOVE&&!o.getCoupon())return _r_(!1);this.DOM_resetForm(),this.DOM_onLoadingStart(),e===this.REWARDS_COUPON_GET?this._getCommand():e===this.REWARDS_COUPON_REQUEST_REMOVE?this._clearCommand():e===this.REWARDS_COUPON_REQUEST_ADD&&this._addCommand(),_r_()},rewardCouponCallback:function(e){if(_i_("44d:dcbc1c86"),this.DOM_onLoadingFinish(),e&&e.valid){var n=this.getCouponValueFromInput();o.setCoupon(n),e.eligible&&this.$hiddenInput.val(n),this.isCouponRetrievedLocally=!1,this.$input.val(""),a.emit(this.REWARDS_COUPON_ADDED,e),this.trackAddCoupon(),1<=i.track("fDeYAefMTeRSBJbKYaDFTDSJC")&&i.stage("fDeYAefMTeRSBJbKYaDFTDSJC",1),this.createCouponCard(e),this.BUI.initComponents&&this.BUI.initComponents(this.$msgList.get(0))}else this.isCouponRetrievedLocally?(o.removeCoupon(),this.isCouponRetrievedLocally=!1,this.$input.val("")):(this.DOM_onError(),a.emit(this.REWARDS_COUPON_INVALID),e&&e.error_messages?this.createInvalidElem({reasons:e.error_messages}):this.createInvalidElem({status:"E_NETWORK_ERROR"}));_r_()},createInvalidElem:function(e){_i_("44d:b7cac0c1"),this.$error.html(B.jstmpl("reward_invalid_message").render({reward_error:e})),_r_()},createCouponCard:function(e){_i_("44d:ce776bac"),this.$msgList.html(B.jstmpl("coupon_card").render({coupon_data:e,reward_data:((e.reward_details||{}).rewards||[])[0]})),e.campaign_details&&"force_majeure_campaign"===e.campaign_details.tag&&!e.eligible&&this.modal.open(),_r_()},handleDiscountChange:function(e){_i_("44d:892ee58e"),c!==e.user_total_discount&&(c=e.user_total_discount,this.onSubmit(this.REWARDS_COUPON_GET)),_r_()},trackMoreInfoClick:function(){_i_("44d:05a81752"),_.trackEvent("AOB-more-info-click"),_r_()},trackMoreInfoHover:function(){_i_("44d:dba68a54"),_.trackEvent("AOB-more-info-hover"),_r_()},trackAddCouponClick:function(){_i_("44d:ad70cd36"),_.trackEvent("AOB-apply-click"),_r_()},trackRemoveCouponClick:function(){_i_("44d:ccd131f7"),_.trackEvent("AOB-remove-click"),_r_()},trackReplaceCouponClick:function(){_i_("44d:404e7955"),_.trackEvent("AOB-replace-click"),_r_()},trackAddCoupon:function(){_i_("44d:26fbe151"),_.trackEvent("AOB-apply-success"),_r_()},trackRemoveCoupon:function(){_i_("44d:b8dc1788"),_.trackEvent("AOB-remove-success"),_r_()},trackReplaceCoupon:function(){_i_("44d:29b09440"),_.trackEvent("AOB-replace-success"),_r_()}}),_r_()}),B.define("component/rewards-ui/promo-code",function(e,n,i){_i_("44d:377e9b06");var r=e("et"),t=e("component/rewards-ui/promo-code-base"),a=e("events");i.exports=t.extend({init:function(){_i_("44d:084d15da"),t.prototype.init.apply(this),this.$loader=this.$el.find(".js-promo-code-loader"),this.$add=this.$el.find(".js-promo-code-add"),this.initEvents(),_r_()},initEvents:function(){_i_("44d:0af994b5"),t.prototype.initEvents.apply(this),this.$add.click(this.onAddClick.bind(this)),2===r.track("fDeYAefMTeRSBJbKYaDFTDSJC")&&a.on("campaign::discounts::changed",this.handleDiscountChange.bind(this)),a.on(this.REWARDS_COUPON_ADDED,this.setActiveRewardUI.bind(this)),a.on(this.REWARDS_COUPON_REMOVED,this.setNoActiveRewardUI.bind(this)),_r_()},onAddClick:function(){_i_("44d:02b00d7f"),this.$add.addClass(this.HIDE_CLASS),this.$form.removeClass(this.HIDE_CLASS),this.$input.focus(),_r_()},setNoActiveRewardUI:function(){_i_("44d:8ac184f1"),this.$title.html(B.jstmpl.translations("desktop_bs3_do_you_have_a_promo_code")),this.$loader.addClass(this.HIDE_CLASS),this.$msgList.empty().addClass(this.HIDE_CLASS),this.$add.addClass(this.HIDE_CLASS),this.$replace.addClass(this.HIDE_CLASS),this.$form.removeClass(this.HIDE_CLASS),this.$submitText.html(B.jstmpl.translations("growth_marketing_fake_promo_code_cta")),_r_()},setActiveRewardUI:function(){_i_("44d:231f7920"),this.$title.html(B.jstmpl.translations("www_promo_code_bs3_list_title")),this.$loader.addClass(this.HIDE_CLASS),this.$msgList.empty().removeClass(this.HIDE_CLASS),this.$add.addClass(this.HIDE_CLASS),this.$replace.removeClass(this.HIDE_CLASS).removeClass("-open"),this.$form.addClass(this.HIDE_CLASS),this.$submitText.html(B.jstmpl.translations("www_promo_code_bs3_field_cta_different_replace")),_r_()},setInitialState:function(){_i_("44d:fe934881"),this.$loader.addClass(this.HIDE_CLASS),this.$form.removeClass(this.HIDE_CLASS),_r_()}}),_r_()}),B.define("component/rewards-ui/promo-code-small",function(e,n,i){_i_("44d:f0498477");var r=e("events"),t=e("component/rewards-ui/promo-code-base");i.exports=t.extend({init:function(){_i_("44d:30b4e10f"),t.prototype.init.apply(this),this.initEvents(),_r_()},initEvents:function(){_i_("44d:63eef912"),r.on(this.REWARDS_COUPON_ADDED,this.addSmallCard.bind(this)),r.on(this.REWARDS_COUPON_REMOVED,this.removeSmallCard.bind(this)),_r_()},removeSmallCard:function(){_i_("44d:1a63e70e"),this.$el.addClass(this.HIDE_CLASS),this.$msgList.empty(),_r_()},addSmallCard:function(e){_i_("44d:c70c58cc"),this.$el.removeClass(this.HIDE_CLASS),this.$msgList.html(B.jstmpl("coupon_card").render({coupon_data:e,reward_data:((e.reward_details||{}).rewards||[])[0],is_small_coupon:!0})),_r_()},setInitalState:function(){}}),_r_()}),B.define("component/rewards-ui/feedback-modal",function(e,n,i){_i_("44d:54ab697b");var r=e("component"),t=window.BUI;i.exports=r.extend({init:function(){_i_("44d:147fd111");var e=t.createInstance("Modal",null,{id:"incentives-feedback-modal"});e.mount(),e.open(),_r_()}}),_r_()}),B.define("component/rewards-ui/landing-modal",function(e,n,i){_i_("44d:781fe3bb");var r,t,a=e("component"),_=e("dismiss-item"),o=window.BUI,s=e("jquery"),d=e("referral/clipboard"),l=e("et");"www"===B.env.b_site_type&&"index"===B.env.b_action&&(r=e("ultrafocus"))&&(t=r.getInstance("rewards-landing-modal","[data-sb-outer]")),i.exports=a.extend({init:function(){_i_("44d:a735ba12"),this.code=this.$el.data("couponCode"),this.modal=o.createInstance("Modal",document.createElement("div"),{id:"rewards-landing-modal",onAfterClose:function(){_i_("44d:dc81eee3"),_("rewards_landing_modal"),t&&t.show(),_r_()},onAfterOpen:function(){_i_("44d:ef8f5957"),this.$modalRoot=s(this.modal.getModalRoot()),this.$modalRoot.find(".js-copy").on("click",function(e){_i_("44d:af24972b"),l.customGoal("HQUMWJeZRVCScHLaUSUfZfOAZfKFVZcO",2),this.copyCode(e),_r_()}.bind(this)),this.code&&(this.$modalRoot.find(".js-code").text(this.code),this.$modalRoot.find(".js-copy").removeAttr("disabled")),_r_()}.bind(this)}),t&&t.on("ultrafocus::shown",function(){_i_("44d:a7983bf52"),s("#ss").focus(),_r_()}),this.modal.mount(),this.modal.open(),_r_()},copyCode:function(e){_i_("44d:b3b49130");var n=s(e.currentTarget).find(".js-copy-text");d.copy(this.code,function(e){if(_i_("44d:2482ec29"),e)return _r_(!1);n.html(B.jstmpl.translations("rewards_landing_modal_code_copied")),setTimeout(function(){_i_("44d:6a0f628a"),n.html(B.jstmpl.translations("rewards_landing_modal_cta_copy")),_r_()},2e3),_r_()}),_r_()}}),_r_()}),B.define("component/rewards-ui/inline-copy-promo-code",function(e,n,i){_i_("44d:585cfdd5");var r=e("component"),t=e("referral/clipboard");i.exports=r.extend({init:function(){_i_("44d:48b965e51"),this.initEvents(),_r_()},initEvents:function(){_i_("44d:4efa041e"),this.$el.on("click",this.copyCode.bind(this)),_r_()},copyCode:function(e){_i_("44d:f0c9cea9");var n=$(e.currentTarget),i=n,r=n.data("couponCode");t.copy(r,function(e){if(_i_("44d:5d059279"),e)return _r_(!1);i.html(B.jstmpl.translations("rewards_incentive_landing_banner_code_copied")),setTimeout(function(){_i_("44d:c2b32fc3"),i.html(r),_r_()},2e3),_r_()}),_r_()}}),_r_()}),booking.env.enable_scripts_tracking&&(booking.env.scripts_tracking.raf.run=!0);